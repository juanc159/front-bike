import{bq as l,k as n,Y as i,br as d,bs as p}from"./index-ecce922e.js";import{S as g}from"./sweetalert2.all-09c1f25c.js";const o=p(),h=l("useCrudCompanyStore",{state:()=>({typeAction:"list",keyList:0,loading:!0,formulario:n({user_id:0,name:"",email:"",nit:"",phone:"",address:"",description:"",nameLegalRepresentative:"",phoneLegalRepresentative:"",startDate:"",endDate:"",headerReport:"",footerReport:"",identification_rep:"",address_rep:"",email_rep:"",base:"",logo:null}),companies:n([]),currentPage:n(1),totalCompanies:n(0),totalPage:n(0),lastPage:0,totalData:n(0)}),getters:{},actions:{clearFormulario(){this.formulario={user_id:0,name:"",email:"",nit:"",phone:"",address:"",description:"",nameLegalRepresentative:"",phoneLegalRepresentative:"",startDate:"",endDate:"",headerReport:"",footerReport:"",identification_rep:"",address_rep:"",email_rep:"",base:"",logo:null}},async fetchAll(e){this.loading=!0,await i.post("/company-list",e).then(t=>{this.loading=!1,this.companies=t.data.companies,this.totalCompanies=t.data.totalCompanies,this.totalPage=t.data.totalPage,this.currentPage=t.data.currentPage,this.lastPage=t.data.lastPage,this.totalData=t.data.totalData}).catch(async t=>{this.loading=!1,console.log(await t)})},async fetchSave(){const e=new FormData;for(const a in this.formulario)e.append(a,this.formulario[a]);const t=d();return t.isLoading=!0,await await i.post("/company-create",e).then(a=>(t.isLoading=!1,a.data.code===200&&o.toast("Éxito",a.data.message,"success"),a.data.code===500&&o.toast("Error",a.data.message,"danger"),a.data.status===422?(o.toast("Error",a.data.message,"danger"),{error:a.data.errors,status:a.data.status}):{status:a.data.code})).catch(async a=>(t.isLoading=!1,console.log(await a),a.response.state===500&&o.toast("Error",a.response.data.message,"danger"),{status:a.response.state}))},async fetchDelete(e){const t=d();return t.isLoading=!0,await await i.delete(`/company-delete/${e}`).then(a=>(t.isLoading=!1,a.data.code===200&&o.toast("Éxito",a.data.message,"success"),a.data.code===500&&o.toast("Error",a.data.message,"danger"),a.data.code)).catch(async a=>(t.isLoading=!1,console.log(await a),a.response.state===500&&o.toast("Error",a.response.data.message,"danger"),a.response.state))},async fetchInfoCompany(e){const t=d();t.isLoading=!0,await i.get(`/company-info/${e}`).then(async s=>{t.isLoading=!1,this.formulario=await s.data.data}).catch(async s=>{t.isLoading=!1,console.log(await s)})},changeState(e,t){let s="";t==0?s="activar":s="inactivar",g.fire({title:"¿Está seguro de "+s+" el Registro seleccionado?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No",allowOutsideClick:!1}).then(a=>{if(a.isConfirmed){const c=d();c.isLoading=!0,i.post("/company-changeState",e).then(r=>{c.isLoading=!1,r.data.code==200&&o.toast("Éxito",r.data.msg,"success"),r.data.code==500&&o.toast("Éxito",r.data.msg,"error")})}else s=="activar"?e.state=0:e.state=1})}}});export{h as u};
