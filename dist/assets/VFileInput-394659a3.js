import{r as i,v as j,S as $,n as Q,aw as W,av as X,ah as Z,y,a$ as D,Y as ee,ax as te,d as o,p as V,K as w,aI as le,aJ as ne}from"./index-5157f066.js";import{d as ae,g as oe,e as ue,f as M,h as se,i as ie,j as re}from"./VTextField-f6b14139.js";import{f as ce}from"./forwardRefs-9d31fcaa.js";import{V as de}from"./VChip-1ee9a6c4.js";function ge(){const e=i(null),s=i(null),g=i(1),f=i(null),l=i([]);function h(){var C;var u=parseInt(event.target.files[0].size/1024);if(u>3e3)return $.fire({icon:"error",title:"Oops...",text:"Debe registrar máximo 3MB",customClass:{container:"my-swal"}}),n(),!1;const r=(C=event.target.files[0].name.split(".").pop())==null?void 0:C.toLowerCase();return l.value.length>0&&!l.value.includes(r)?($.fire({icon:"error",title:"Oops...",text:`Solo se admite archivos con extensiónes: ${l.value.join(", ")}`,customClass:{container:"my-swal"}}),n(),!1):event.target.files.length===0?(n(),!1):(e.value=event.target.files[0],!0)}j(e,u=>{if(!(u instanceof File))return;const r=new FileReader;r.readAsDataURL(u),r.addEventListener("load",()=>{s.value=r.result})});function n(){e.value=null,s.value=null,f.value=null,g.value++}return{imageFile:e,imageUrl:s,handleImageSelected:h,key:g,allowedExtensions:l,clearData:n,name:f}}const he=Q()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...ae({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>W(e).every(s=>s!=null&&typeof s=="object")},...oe({clearable:!0})},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:g,emit:f,slots:l}=s;const{t:h}=X(),n=Z(e,"modelValue"),{isFocused:u,focus:r,blur:C}=ue(e),F=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),b=y(()=>(n.value??[]).reduce((t,a)=>{let{size:v=0}=a;return t+v},0)),z=y(()=>D(b.value,F.value)),I=y(()=>(n.value??[]).map(t=>{const{name:a="",size:v=0}=t;return e.showSize?`${a} (${D(v,F.value)})`:a})),E=y(()=>{var a;const t=((a=n.value)==null?void 0:a.length)??0;return e.showSize?h(e.counterSizeString,t,z.value):h(e.counterString,t)}),R=i(),P=i(),c=i();function S(){var t;c.value!==document.activeElement&&((t=c.value)==null||t.focus()),u.value||r()}function L(t){B(t)}function N(t){f("mousedown:control",t)}function B(t){var a;(a=c.value)==null||a.click(),f("click:control",t)}function U(t){t.stopPropagation(),S(),le(()=>{n.value=[],ne(e["onClick:clear"],t)})}return j(n,t=>{(!Array.isArray(t)||!t.length)&&c.value&&(c.value.value="")}),ee(()=>{const t=!!(l.counter||e.counter),a=!!(t||l.details),[v,O]=te(g),[{modelValue:fe,...J}]=M.filterProps(e),[K]=se(e);return o(M,V({ref:R,modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-file-input",e.class],style:e.style,"onClick:prepend":L},v,J,{focused:u.value}),{...l,default:m=>{let{id:k,isDisabled:p,isDirty:A,isReadonly:T,isValid:Y}=m;return o(ie,V({ref:P,"prepend-icon":e.prependIcon,onMousedown:N,onClick:B,"onClick:clear":U,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},K,{id:k.value,active:A.value||u.value,dirty:A.value,disabled:p.value,focused:u.value,error:Y.value===!1}),{...l,default:_=>{var x;let{props:{class:q,...G}}=_;return o(w,null,[o("input",V({ref:c,type:"file",readonly:T.value,disabled:p.value,multiple:e.multiple,name:e.name,onClick:d=>{d.stopPropagation(),S()},onChange:d=>{if(!d.target)return;const H=d.target;n.value=[...H.files??[]]},onFocus:S,onBlur:C},G,O),null),o("div",{class:q},[!!((x=n.value)!=null&&x.length)&&(l.selection?l.selection({fileNames:I.value,totalBytes:b.value,totalBytesReadable:z.value}):e.chips?I.value.map(d=>o(de,{key:d,size:"small",color:e.color},{default:()=>[d]})):I.value.join(", "))])])}})},details:a?m=>{var k,p;return o(w,null,[(k=l.details)==null?void 0:k.call(l,m),t&&o(w,null,[o("span",null,null),o(re,{active:!!((p=n.value)!=null&&p.length),value:E.value},l.counter)])])}:void 0})}),ce({},R,P,c)}});export{he as V,ge as u};
