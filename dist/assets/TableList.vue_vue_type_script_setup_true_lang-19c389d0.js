import{d as j,z as Q,y as R,k as b,ar as q,G as z,bj as G,I as H,o as u,c as v,p as l,w as r,m as e,q as s,H as g,V as _,E as y,K as x,L as w,F as K,a as J,b as C,x as c,B as S,A as T}from"./index-ecce922e.js";import{S as O}from"./sweetalert2.all-09c1f25c.js";import{n as W}from"./validators-da167dd6.js";import{_ as X,V as Y}from"./VPagination-b0fd92c0.js";import{u as Z}from"./useCrudInventoryStore-c40b9d21.js";import{V as $}from"./VSelect-d4be5138.js";import{V as ee}from"./VSpacer-07cad1f4.js";import{V as ae}from"./VTextField-a151c4b5.js";import{V as P}from"./VContainer-c4cd337c.js";import{V as A}from"./VDivider-32b31792.js";import{V as k}from"./VChip-ef028c36.js";import{V as te}from"./VTable-1a3fdd4b.js";const le={class:"me-3",style:{width:"80px"}},oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},se={style:{width:"10rem"}},ne=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Dias "),e("th",{scope:"col"}," Tipo de Vehículo "),e("th",{scope:"col"}," Marca "),e("th",{scope:"col"}," Modelo "),e("th",{scope:"col"}," Placa "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),re={colspan:"10"},ce={class:"text-center d-flex justify-content-center aling-items-center"},ie=e("tr",null,[e("td",{colspan:"10",class:"text-center"}," No se encuentran resultados ")],-1),de=[ie],ue={class:"text-sm text-disabled"},ke=j({__name:"TableList",setup(pe){const I=Q(),i=Z(),{inventories:f,totalPage:m,lastPage:N,currentPage:o,totalData:U,loading:B}=R(i),d=b(10),p=b(""),V=async()=>{await i.fetchAll({company_id:I.company.id,perPage:d.value,page:o.value,searchQuery:p.value})};q(async()=>{await V()}),z(o,async()=>{o.value>m.value&&(o.value=m.value)}),z(d,async()=>{o.value=1}),G([o,p,d],async()=>{await V()});const F=H(()=>{const n=f.value.length?(o.value-1)*m.value+1:0,t=f.value.length+(o.value-1)*m.value;return`Mostrando ${n} a ${t} de ${U.value} registros`}),D=async(n,t=null)=>{i.clearFormulario(),i.typeAction=n,t&&i.fetchInfo(t)},M=async n=>{O.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await i.fetchDelete(n),await V()):t.isDenied})},E=n=>{i.changeSate(n.id,n.state)};return(n,t)=>(u(),v("div",null,[l(P,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",le,[l($,{modelValue:s(d),"onUpdate:modelValue":t[0]||(t[0]=a=>g(d)?d.value=a:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(ee),e("div",oe,[e("div",se,[l(ae,{modelValue:s(p),"onUpdate:modelValue":t[1]||(t[1]=a=>g(p)?p.value=a:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(_,{color:"primary",onClick:t[2]||(t[2]=a=>D("form"))},{default:r(()=>[y(" Agregar ")]),_:1})])]),_:1}),l(A),l(te,{class:"text-no-wrap"},{default:r(()=>[ne,e("tbody",null,[x(e("tr",null,[e("td",re,[l(X)])],512),[[w,s(B)]]),(u(!0),v(K,null,J(s(f),(a,L)=>x((u(),v("tr",{key:L,style:{height:"3.75rem"}},[e("td",null,[a.days<30?(u(),C(k,{key:0,size:"large",color:"success"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0),a.days>=16&&a.days<=30?(u(),C(k,{key:1,size:"large",color:"warning"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0),a.days>30?(u(),C(k,{key:2,size:"large",color:"error"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0)]),e("td",null,[e("span",null,c(a.vehicleType),1)]),e("td",null,[e("span",null,c(a.brand),1)]),e("td",null,[e("span",null,c(a.model),1)]),e("td",null,[e("span",null,c(a.plate),1)]),e("td",null,[e("span",null,"$ "+c(s(W)(a.purchaseValue)),1)]),e("td",null,[l($,{modelValue:a.state,"onUpdate:modelValue":[h=>a.state=h,h=>E(a)],items:["Ingresado","Separado","Vendido"]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ce,[l(_,{class:"mr-2",icon:"",size:"x-small",color:"error",onClick:h=>M(a.id)},{default:r(()=>[l(T,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(_,{class:"mr-2",icon:"",size:"x-small",color:"default",onClick:h=>D("form",a.id)},{default:r(()=>[l(T,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[w,!s(B)]])),128))]),x(e("tfoot",null,de,512),[[w,!s(f).length]])]),_:1}),l(A),l(P,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",ue,c(s(F)),1),l(Y,{modelValue:s(o),"onUpdate:modelValue":t[3]||(t[3]=a=>g(o)?o.value=a:null),size:"small","total-visible":5,length:s(N)},null,8,["modelValue","length"])]),_:1})]))}});export{ke as _};
