import{d as F,z as I,y as L,k as w,ar as U,G as C,bj as j,I as M,o as f,c as h,p as a,w as c,m as e,q as o,H as v,A as y,B as Q,K as _,L as V,F as R,a as q,x as S,V as b}from"./index-e5b1715d.js";import{S as E}from"./sweetalert2.all-09c1f25c.js";import{V as B,_ as G,a as H}from"./VPagination-2a43a654.js";import{u as K}from"./useCrudThirdStore-f5db8b64.js";import{V as J}from"./VSelect-25a384f7.js";import{V as O}from"./VSpacer-8ebd0f28.js";import{V as W}from"./VTextField-7b882186.js";import{V as D}from"./VDivider-8a24bc85.js";import{V as X}from"./VTable-75e60859.js";const Y={class:"me-3",style:{width:"80px"}},Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{width:"10rem"}},te=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Nombre "),e("th",{scope:"col"}," Acciones ")])],-1),ae={colspan:"2"},le={class:"text-center",style:{width:"5rem"}},se=e("tr",null,[e("td",{colspan:"2",class:"text-center"}," No se encuentran resultados ")],-1),oe=[se],ne={class:"text-sm text-disabled"},ye=F({__name:"TableList",setup(re){const k=I(),n=K(),{thirds:u,totalPage:m,lastPage:T,currentPage:l,totalData:A,loading:g}=L(n),r=w(10),d=w(""),p=async()=>{await n.fetchAll({company_id:k.company.id,perPage:r.value,page:l.value,searchQuery:d.value})};U(async()=>{await p()}),C(l,async()=>{l.value>m.value&&(l.value=m.value)}),C(r,async()=>{l.value=1}),j([l,d,r],async()=>{await p()});const P=M(()=>{const i=u.value.length?(l.value-1)*m.value+1:0,t=u.value.length+(l.value-1)*m.value;return`Mostrando ${i} a ${t} de ${A.value} registros`}),x=async(i,t=null)=>{n.clearFormulario(),n.typeAction=i,t&&n.fetchInfo(t)},$=async i=>{E.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await n.fetchDelete(i),await p()):t.isDenied})};return(i,t)=>(f(),h("div",null,[a(B,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:c(()=>[e("div",Y,[a(J,{modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=s=>v(r)?r.value=s:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(O),e("div",Z,[e("div",ee,[a(W,{modelValue:o(d),"onUpdate:modelValue":t[1]||(t[1]=s=>v(d)?d.value=s:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(y,{color:"primary",onClick:t[2]||(t[2]=s=>x("form"))},{default:c(()=>[Q(" Agregar ")]),_:1})])]),_:1}),a(D),a(X,{class:"text-no-wrap"},{default:c(()=>[te,e("tbody",null,[_(e("tr",null,[e("td",ae,[a(G)])],512),[[V,o(g)]]),(f(!0),h(R,null,q(o(u),(s,z)=>_((f(),h("tr",{key:z,style:{height:"3.75rem"}},[e("td",null,[e("span",null,S(s.name),1)]),e("td",le,[a(y,{size:"x-small",color:"error",variant:"text",onClick:N=>$(s.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:N=>x("form",s.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[V,!o(g)]])),128))]),_(e("tfoot",null,oe,512),[[V,!o(u).length]])]),_:1}),a(D),a(B,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:c(()=>[e("span",ne,S(o(P)),1),a(H,{modelValue:o(l),"onUpdate:modelValue":t[3]||(t[3]=s=>v(l)?l.value=s:null),size:"small","total-visible":5,length:o(T)},null,8,["modelValue","length"])]),_:1})]))}});export{ye as _};
