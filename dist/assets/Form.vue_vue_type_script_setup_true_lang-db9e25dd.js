import{d as T}from"./VTextField-a151c4b5.js";import{d as b,I as S,bL as g,o as v,c as N,q as t,b as U,B as z,p as a,bS as L,a as q,w as o,n as E,bN as A,bO as C,s as M,z as R,k as _,y as j,ar as K,m as D,V as I,E as w}from"./index-ecce922e.js";import{V as G}from"./VSelect-d4be5138.js";import{_ as O}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-395fb60e.js";import{_ as H}from"./AppTextField.vue_vue_type_script_setup_true_lang-94b57d79.js";import{u as J}from"./useCrudAdministrationStore-c9bac2b6.js";import{n as Q,r as x,v as W}from"./validators-da167dd6.js";import{a as d,V}from"./VRow-1ecd9fa6.js";import{V as X}from"./VForm-a9ea2bae.js";const Y=b({name:"AppSelect",inheritAttrs:!1}),Z=b({...Y,setup(y){const c=S(()=>{const n=g(),r=n.id||n.label;return r?`app-select-${r}-${Math.random().toString(36).slice(2,7)}`:void 0}),p=S(()=>g().label);return(n,r)=>(v(),N("div",{class:M(["app-select flex-grow-1",n.$attrs.class])},[t(p)?(v(),U(T,{key:0,for:t(c),class:"mb-1 text-body-2 text-high-emphasis",text:t(p)},null,8,["for","text"])):z("",!0),a(G,A(C({...n.$attrs,class:null,label:void 0,variant:"outlined",id:t(c),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",n.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),L({_:2},[q(n.$slots,(s,u)=>({name:u,fn:o(f=>[E(n.$slots,u,A(C(f||{})))])}))]),1040)],2))}}),h={class:"col-md-6 d-flex justify-content-end"},ie=b({__name:"Form",props:{userId:{type:Number,default:null,required:!1}},setup(y){const c=y,p=R(),n=_(),r=J(),{formulario:s}=j(r),u=_([]),f=[{value:1,title:"Pagado"},{value:0,title:"Sin Pagar"}],B=_([]),$=async i=>{var e;r.typeAction=i,B.value=[],u.value=[],await((e=n.value)==null?void 0:e.resetValidation()),i!="back"&&r.keyList++},F=async()=>{var e;const i=await((e=n.value)==null?void 0:e.validate());if(i!=null&&i.valid){s.value.cost=s.value.cost.replaceAll(".",""),s.value.company_id=p.company.id;const m=await r.fetchSave();m.status===200&&$("list"),m.status===422&&(u.value=m.error)}};return K(async()=>{c.userId&&(await r.fetchInfo(c.userId),s.value.cost=Q(s.value.cost))}),(i,e)=>{const m=H,k=O,P=Z;return v(),N("div",null,[a(V,null,{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[D("div",h,[a(I,{color:"secondary",onClick:e[0]||(e[0]=l=>$("back"))},{default:o(()=>[w(" Atras ")]),_:1})])]),_:1})]),_:1}),a(t(X),{ref_key:"formValidation",ref:n,"lazy-validation":""},{default:o(()=>[a(V,null,{default:o(()=>[a(d,{cols:"12",md:"6"},{default:o(()=>[a(m,{modelValue:t(s).name,"onUpdate:modelValue":e[1]||(e[1]=l=>t(s).name=l),rules:[t(x)],autocomplete:"off","error-messages":t(u).name,label:"Nombre",onKeypress:e[2]||(e[2]=l=>t(u).name="")},null,8,["modelValue","rules","error-messages"])]),_:1}),a(d,{cols:"12",md:"6"},{default:o(()=>[a(m,{modelValue:t(s).cost,"onUpdate:modelValue":e[3]||(e[3]=l=>t(s).cost=l),rules:[t(x)],autocomplete:"off","error-messages":t(u).cost,onBlur:e[4]||(e[4]=l=>t(s).cost=t(W)(t(s).cost)),label:"Costo",onKeypress:e[5]||(e[5]=l=>t(u).cost="")},null,8,["modelValue","rules","error-messages"])]),_:1}),a(d,{cols:"12",md:"4"},{default:o(()=>[a(k,{modelValue:t(s).init_date,"onUpdate:modelValue":e[6]||(e[6]=l=>t(s).init_date=l),label:"Fecha Inicial"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:o(()=>[a(k,{modelValue:t(s).final_date,"onUpdate:modelValue":e[7]||(e[7]=l=>t(s).final_date=l),label:"Fecha Final"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:o(()=>[a(P,{items:f,modelValue:t(s).status,"onUpdate:modelValue":e[8]||(e[8]=l=>t(s).status=l),label:"Estado"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,null,{default:o(()=>[a(d,{cols:"12 d-flex justify-content-center"},{default:o(()=>[a(I,{color:"primary",onClick:F},{default:o(()=>[w(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}});export{ie as _};
