import{d as K,z as O,k as x,y as X,aq as Y,L as A,ar as Z,N as ee,o as k,c as U,p as e,w as o,au as N,G as g,H as r,A as P,W as le,C as c,q as n,E as w,av as ae,Q as C,m as l,R as b,M as S,F as te,a as oe,x as p,V as z}from"./index-62eefdbf.js";import{S as ne}from"./sweetalert2.all-09c1f25c.js";import{V as R,_ as se,a as ie}from"./VPagination-d6aadf77.js";import{u as ue}from"./useCrudUserStore-731d01f3.js";import{V as E}from"./VSpacer-405bbbb1.js";import{V as D}from"./VDivider-b9b8fa2a.js";import{V as F}from"./VSelect-099d6728.js";import{V as L}from"./VCheckbox-bff7e084.js";import{V as T}from"./VTextField-afc15bd9.js";import{V as de}from"./VTable-35230ba2.js";import{V as re}from"./VSwitch-9409d18b.js";const ce={class:"mt-4"},me=l("span",null,"Estado",-1),fe={class:"mt-4"},pe={class:"me-3",style:{width:"80px"}},ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ve={style:{width:"10rem"}},_e=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," Nombre usuario "),l("th",{scope:"col"}," Número de identificación "),l("th",{scope:"col"}," Teléfono "),l("th",{scope:"col"}," Correo "),l("th",{scope:"col"}," Rol "),l("th",{scope:"col"}," Acciones "),l("th",{scope:"col"}," Estado ")])],-1),he={colspan:"6"},ye={class:"text-center",style:{width:"5rem"}},xe=l("tr",null,[l("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),ge=[xe],we={class:"text-sm text-disabled"},ze=K({__name:"TableList",setup(Ce){const I=O(),d=ue(),m=x(!0),{users:_,totalPage:h,lastPage:q,currentPage:i,totalData:M,arrayRoles:Q,loading:B}=X(d),f=x(10),v=x(""),s=x({}),V=async()=>{await d.fetchAll({company_id:I.company.id,perPage:f.value,page:i.value,searchQuery:v.value,role_id:s.value.role_id,state:s.value.state,name:s.value.name,identification:s.value.identification})};Y(async()=>{await V()}),A(i,async()=>{i.value>h.value&&(i.value=h.value)}),A(f,async()=>{i.value=1}),Z([i,v,f],async()=>{await V()});const j=ee(()=>{const u=_.value.length?(i.value-1)*h.value+1:0,a=_.value.length+(i.value-1)*h.value;return`Mostrando ${u} a ${a} de ${M.value} registros`}),$=async(u,a=null)=>{d.clearFormulario(),d.typeAction=u,a&&d.fetchInfoUser(a)},G=async(u,a)=>{d.changeState(u,a)},H=()=>{s.value={},V()},W=async u=>{ne.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await d.fetchDelete(u),await V()):a.isDenied})};return(u,a)=>(k(),U("div",null,[e(P,{title:"Listado Usuario"},{default:o(()=>[e(N,null,{default:o(()=>[e(g,null,{default:o(()=>[e(r,{cols:"12"},{default:o(()=>[e(P,null,{default:o(()=>[e(le,null,{default:o(()=>[e(c,{color:"orange-lighten-2",variant:"text",onClick:a[0]||(a[0]=t=>m.value=!n(m))},{default:o(()=>[w(" Criterios de búsqueda ")]),_:1}),e(E),e(c,{icon:n(m)?"mdi-chevron-up":"mdi-chevron-down",onClick:a[1]||(a[1]=t=>m.value=!n(m))},null,8,["icon"])]),_:1}),e(ae,null,{default:o(()=>[C(l("div",null,[e(D),e(N,null,{default:o(()=>[e(g,null,{default:o(()=>[e(r,{cols:"12",md:"6"},{default:o(()=>[l("div",null,[e(F,{modelValue:n(s).role_id,"onUpdate:modelValue":a[2]||(a[2]=t=>n(s).role_id=t),items:n(Q),"item-title":"name","item-value":"id",label:"Tipo de usuario"},null,8,["modelValue","items"])]),l("div",ce,[e(g,null,{default:o(()=>[e(r,{cols:"12",sm:"2",md:"2"},{default:o(()=>[me]),_:1}),e(r,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(L,{modelValue:n(s).state,"onUpdate:modelValue":a[3]||(a[3]=t=>n(s).state=t),label:"Activo",value:1},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(L,{modelValue:n(s).state,"onUpdate:modelValue":a[4]||(a[4]=t=>n(s).state=t),value:0,label:"Inactivo"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),e(r,{cols:"12",md:"6"},{default:o(()=>[l("div",null,[e(T,{modelValue:n(s).name,"onUpdate:modelValue":a[5]||(a[5]=t=>n(s).name=t),label:"Usuario"},null,8,["modelValue"])]),l("div",fe,[e(T,{modelValue:n(s).identification,"onUpdate:modelValue":a[6]||(a[6]=t=>n(s).identification=t),label:"Número de identificación"},null,8,["modelValue"])])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(r,{cols:"12 d-flex justify-content-center"},{default:o(()=>[e(c,{color:"primary",class:"mr-2",onClick:V},{default:o(()=>[w(" Buscar ")]),_:1}),e(c,{color:"primary",onClick:H},{default:o(()=>[w(" Limpiar Filtros ")]),_:1})]),_:1})]),_:1})]),_:1})],512),[[b,n(m)]])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[l("div",pe,[e(F,{modelValue:n(f),"onUpdate:modelValue":a[7]||(a[7]=t=>S(f)?f.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(E),l("div",ve,[l("div",Ve,[e(T,{modelValue:n(v),"onUpdate:modelValue":a[8]||(a[8]=t=>S(v)?v.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(c,{color:"primary",onClick:a[9]||(a[9]=t=>$("form"))},{default:o(()=>[w(" Agregar ")]),_:1})])]),_:1}),e(D),e(de,{class:"text-no-wrap"},{default:o(()=>[_e,l("tbody",null,[C(l("tr",null,[l("td",he,[e(se)])],512),[[b,n(B)]]),(k(!0),U(te,null,oe(n(_),(t,J)=>C((k(),U("tr",{key:J,style:{height:"3.75rem"}},[l("td",null,[l("span",null,p(t.name),1)]),l("td",null,[l("span",null,p(t.identification),1)]),l("td",null,[l("span",null,p(t.phone),1)]),l("td",null,[l("span",null,p(t.email),1)]),l("td",null,[l("span",null,p(t.role),1)]),l("td",null,[e(re,{modelValue:t.state,"onUpdate:modelValue":y=>t.state=y,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:y=>G(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),l("td",ye,[e(c,{size:"x-small",color:"error",variant:"text",onClick:y=>W(t.id)},{default:o(()=>[e(z,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(c,{icon:"",size:"x-small",color:"default",variant:"text",onClick:y=>$("form",t.id)},{default:o(()=>[e(z,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[b,!n(B)]])),128))]),C(l("tfoot",null,ge,512),[[b,!n(_).length]])]),_:1}),e(D),e(R,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[l("span",we,p(n(j)),1),e(ie,{modelValue:n(i),"onUpdate:modelValue":a[10]||(a[10]=t=>S(i)?i.value=t:null),size:"small","total-visible":5,length:n(q)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]))}});export{ze as _};
