import{e as I,g as M,s as E,r as S,q as F,v as b,x as L,y as U,o as u,c as p,d as t,w as o,a as e,k as n,J as y,E as h,b as Q,I as D,G as x,H as g,K as R,L as j,t as V,V as w,S as q}from"./index-5157f066.js";import{_ as G,V as H}from"./VPagination-4258e78a.js";import{u as J}from"./useCrudMecanicStore-f3b34f5c.js";import{V as K}from"./VSelect-6157aeab.js";import{V as O}from"./VSpacer-a82be323.js";import{V as W}from"./VTextField-f6b14139.js";import{V as B}from"./VDivider-43847767.js";import{V as X}from"./VTable-bba866c0.js";const Y={class:"me-3",style:{width:"80px"}},Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{width:"10rem"}},te=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Nombre Completo "),e("th",{scope:"col"}," Cédula "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),ae={colspan:"4"},le={key:0},se={key:1},ne={class:"text-center",style:{width:"5rem"}},oe=e("tr",null,[e("td",{colspan:"4",class:"text-center"}," No se encuentran resultados ")],-1),ie=[oe],re={class:"text-sm text-disabled"},ye=I({__name:"TableList",setup(ce){const $=M(),i=J(),{mecanic:m,totalPage:f,lastPage:z,currentPage:s,totalData:A,loading:C}=E(i),r=S(10),d=S(""),v=async()=>{await i.fetchAll({perPage:r.value,page:s.value,searchQuery:d.value,company_id:$.company.id})};F(async()=>{await v()}),b(s,async()=>{s.value>f.value&&(s.value=f.value)}),b(r,async()=>{s.value=1}),L([s,d,r],async()=>{await v()});const P=U(()=>{const c=m.value.length?(s.value-1)*f.value+1:0,a=m.value.length+(s.value-1)*f.value;return`Mostrando ${c} a ${a} de ${A.value} registros`}),_=async(c,a=null)=>{i.clearFormulario(),i.typeAction=c,a&&i.fetchInfo({id:a})},T=async c=>{q.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await i.fetchDelete(c),await v()):a.isDenied})};return(c,a)=>(u(),p("div",null,[t(D,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[e("div",Y,[t(K,{modelValue:n(r),"onUpdate:modelValue":a[0]||(a[0]=l=>y(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(O),e("div",Z,[e("div",ee,[t(W,{modelValue:n(d),"onUpdate:modelValue":a[1]||(a[1]=l=>y(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),t(h,{color:"primary",onClick:a[2]||(a[2]=l=>_("form"))},{default:o(()=>[Q(" Agregar ")]),_:1})])]),_:1}),t(B),t(X,{class:"text-no-wrap"},{default:o(()=>[te,e("tbody",null,[x(e("tr",null,[e("td",ae,[t(G)])],512),[[g,n(C)]]),(u(!0),p(R,null,j(n(m),(l,N)=>x((u(),p("tr",{key:N,style:{height:"3.75rem"}},[e("td",null,[e("span",null,V(l.name+" "+l.last_name),1)]),e("td",null,[e("span",null,V(l.identify),1)]),e("td",null,[l.status==1?(u(),p("span",le," Activo ")):(u(),p("span",se," Inactivo "))]),e("td",ne,[t(h,{size:"x-small",color:"error",variant:"text",onClick:k=>T(l.id)},{default:o(()=>[t(w,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:k=>_("form",l.id)},{default:o(()=>[t(w,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:k=>_("info",l.id)},{default:o(()=>[t(w,{size:"22",icon:"mdi-currency-usd"})]),_:2},1032,["onClick"])])])),[[g,!n(C)]])),128))]),x(e("tfoot",null,ie,512),[[g,!n(m).length]])]),_:1}),t(B),t(D,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[e("span",re,V(n(P)),1),t(H,{modelValue:n(s),"onUpdate:modelValue":a[3]||(a[3]=l=>y(s)?s.value=l:null),size:"small","total-visible":5,length:n(z)},null,8,["modelValue","length"])]),_:1})]))}});export{ye as _};
