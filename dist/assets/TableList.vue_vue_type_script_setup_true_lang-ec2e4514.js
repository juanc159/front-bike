import{d as F,z as E,y as L,k as C,ar as M,G as D,bj as j,I as Q,o as V,c as v,p as a,w as c,m as e,q as n,H as y,V as g,E as R,K as _,L as x,F as q,a as G,x as f,A as b}from"./index-333f41b8.js";import{S as H}from"./sweetalert2.all-689f8ffb.js";import{V as k,_ as K,a as J}from"./VPagination-627eb1b7.js";import{u as O}from"./useCrudIncomeVehicleStore-5849385f.js";import{V as B}from"./VSelect-026de29d.js";import{V as W}from"./VSpacer-87e0b677.js";import{V as X}from"./VTextField-e0c3ad65.js";import{V as P}from"./VDivider-6040cd18.js";import{V as Y}from"./VTable-3c216502.js";const Z={class:"me-3",style:{width:"80px"}},ee={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},te={style:{width:"10rem"}},ae=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Tipo de Vehículo "),e("th",{scope:"col"}," Marca "),e("th",{scope:"col"}," Placa "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),le={colspan:"10"},oe={class:"text-center d-flex justify-content-center aling-items-center"},se=e("tr",null,[e("td",{colspan:"10",class:"text-center"}," No se encuentran resultados ")],-1),ne=[se],re={class:"text-sm text-disabled"},ye=F({__name:"TableList",setup(ie){const T=E(),r=O(),{incomeVehicles:u,totalPage:p,lastPage:$,currentPage:o,totalData:A,loading:w}=L(r),i=C(10),d=C(""),h=async()=>{await r.fetchAll({company_id:T.company.id,perPage:i.value,page:o.value,searchQuery:d.value})};M(async()=>{await h()}),D(o,async()=>{o.value>p.value&&(o.value=p.value)}),D(i,async()=>{o.value=1}),j([o,d,i],async()=>{await h()});const I=Q(()=>{const s=u.value.length?(o.value-1)*p.value+1:0,t=u.value.length+(o.value-1)*p.value;return`Mostrando ${s} a ${t} de ${A.value} registros`}),S=async(s,t=null)=>{r.clearFormulario(),r.typeAction=s,t&&r.fetchInfo(t)},z=async s=>{H.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await r.fetchDelete(s),await h()):t.isDenied})},N=s=>{r.changeSate(s.id,s.state)};return(s,t)=>(V(),v("div",null,[a(k,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:c(()=>[e("div",Z,[a(B,{modelValue:n(i),"onUpdate:modelValue":t[0]||(t[0]=l=>y(i)?i.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(W),e("div",ee,[e("div",te,[a(X,{modelValue:n(d),"onUpdate:modelValue":t[1]||(t[1]=l=>y(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(g,{color:"primary",onClick:t[2]||(t[2]=l=>S("form"))},{default:c(()=>[R(" Agregar ")]),_:1})])]),_:1}),a(P),a(Y,{class:"text-no-wrap"},{default:c(()=>[ae,e("tbody",null,[_(e("tr",null,[e("td",le,[a(K)])],512),[[x,n(w)]]),(V(!0),v(q,null,G(n(u),(l,U)=>_((V(),v("tr",{key:U,style:{height:"3.75rem"}},[e("td",null,[e("span",null,f(l.type_vehicle),1)]),e("td",null,[e("span",null,f(l.brand),1)]),e("td",null,[e("span",null,f(l.plate),1)]),e("td",null,[a(B,{modelValue:l.state,"onUpdate:modelValue":[m=>l.state=m,m=>N(l)],items:["Ingresado","Separado","Vendido"]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",oe,[a(g,{class:"mr-2",icon:"",size:"x-small",color:"error",onClick:m=>z(l.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(g,{class:"mr-2",icon:"",size:"x-small",color:"default",onClick:m=>S("form",l.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[x,!n(w)]])),128))]),_(e("tfoot",null,ne,512),[[x,!n(u).length]])]),_:1}),a(P),a(k,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:c(()=>[e("span",re,f(n(I)),1),a(J,{modelValue:n(o),"onUpdate:modelValue":t[3]||(t[3]=l=>y(o)?o.value=l:null),size:"small","total-visible":5,length:n($)},null,8,["modelValue","length"])]),_:1})]))}});export{ye as _};
