import{d as U,z as L,y as R,k,ar as j,G as D,bj as M,I as Q,o as v,c as y,p as a,w as r,m as e,q as o,H as x,A as f,V as _,B as b,K as V,L as g,F as q,a as G,x as d}from"./index-13e9e9f8.js";import{S as H}from"./sweetalert2.all-09c1f25c.js";import{V as B,_ as K,a as J}from"./VPagination-1ec261be.js";import{u as O}from"./useCrudSaleStore-4467cbc1.js";import{V as W}from"./VSelect-457fc5fa.js";import{V as X}from"./VSpacer-4c15bfe5.js";import{V as Y}from"./VTextField-2e327a5c.js";import{V as T}from"./VDivider-bc2a7ae6.js";import{V as Z}from"./VTable-a9c2f071.js";const ee={class:"me-3",style:{width:"80px"}},te={class:"me-3",style:{width:"80px"}},ae={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},le={style:{width:"10rem"}},se=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Referencia "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Valor Venta "),e("th",{scope:"col"}," Total "),e("th",{scope:"col"}," Utilidades "),e("th",{scope:"col"}," Acciones ")])],-1),oe={colspan:"4"},ne={class:"text-center",style:{width:"5rem"}},ie=e("tr",null,[e("td",{colspan:"4",class:"text-center"}," No se encuentran resultados ")],-1),re=[ie],ce={class:"text-sm text-disabled"},Ve=U({__name:"TableList",setup(de){const w=L(),n=O(),{sales:p,totalPage:m,lastPage:z,currentPage:s,totalData:$,loading:C,pathExcel:A}=R(n),c=k(10),u=k(""),h=async()=>{await n.fetchAll({company_id:w.company.id,perPage:c.value,page:s.value,searchQuery:u.value})};j(async()=>{await h()}),D(s,async()=>{s.value>m.value&&(s.value=m.value)}),D(c,async()=>{s.value=1}),M([s,u,c],async()=>{await h()});const P=Q(()=>{const i=p.value.length?(s.value-1)*m.value+1:0,t=p.value.length+(s.value-1)*m.value;return`Mostrando ${i} a ${t} de ${$.value} registros`}),S=async(i,t=null)=>{n.clearFormulario(),n.typeAction=i,t&&n.fetchInfo(t)},N=async()=>{await n.excel({company_id:w.company.id}).then(i=>{window.open(A.value,"_blank")})},E=async i=>{H.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await n.fetchDelete(i),await h()):t.isDenied})};return(i,t)=>(v(),y("div",null,[a(B,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",ee,[a(W,{modelValue:o(c),"onUpdate:modelValue":t[0]||(t[0]=l=>x(c)?c.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",te,[a(f,{"mt-2":"",size:"x-small",color:"default",variant:"text",title:"Descargar",onClick:t[1]||(t[1]=l=>N())},{default:r(()=>[a(_,{size:"30",icon:"mdi-file-excel"}),b(" Excel ")]),_:1})]),a(X),e("div",ae,[e("div",le,[a(Y,{modelValue:o(u),"onUpdate:modelValue":t[2]||(t[2]=l=>x(u)?u.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(f,{color:"primary",onClick:t[3]||(t[3]=l=>S("form"))},{default:r(()=>[b(" Agregar ")]),_:1})])]),_:1}),a(T),a(Z,{class:"text-no-wrap"},{default:r(()=>[se,e("tbody",null,[V(e("tr",null,[e("td",oe,[a(K)])],512),[[g,o(C)]]),(v(!0),y(q,null,G(o(p),(l,F)=>V((v(),y("tr",{key:F,style:{height:"3.75rem"}},[e("td",null,[e("span",null,d(l.inventory_reference),1)]),e("td",null,[e("span",null,d(l.inventory_purchaseValue),1)]),e("td",null,[e("span",null,d(l.price_vehicle),1)]),e("td",null,[e("span",null,d(l.total),1)]),e("td",null,[e("span",null,d(l.utilities),1)]),e("td",ne,[a(f,{size:"x-small",color:"error",variant:"text",onClick:I=>E(l.id)},{default:r(()=>[a(_,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:I=>S("form",l.id)},{default:r(()=>[a(_,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[g,!o(C)]])),128))]),V(e("tfoot",null,re,512),[[g,!o(p).length]])]),_:1}),a(T),a(B,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",ce,d(o(P)),1),a(J,{modelValue:o(s),"onUpdate:modelValue":t[4]||(t[4]=l=>x(s)?s.value=l:null),size:"small","total-visible":5,length:o(z)},null,8,["modelValue","length"])]),_:1})]))}});export{Ve as _};
