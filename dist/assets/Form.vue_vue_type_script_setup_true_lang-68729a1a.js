import{u as I,V as N}from"./VFileInput-eb2d5cc8.js";import{u as S}from"./useCrudCompanyStore-84fb8acd.js";import{d as B,z as T,k as V,y as c,ar as j,o as U,c as q,p as a,w as o,A as L,B as b,q as e,b as z,a3 as A}from"./index-13e9e9f8.js";import{r as m,l as p,s as R,a as k,e as w}from"./validators-e0eb24cc.js";import{a as n,V as g}from"./VRow-cb5cfbd1.js";import{V as K}from"./VCard-15e81e81.js";import{V as u}from"./VTextField-2e327a5c.js";import{V as D}from"./VForm-ceb26d7c.js";const W=B({__name:"Form",props:{companyId:{type:Number,default:null,required:!1}},setup(_){const x=_,f=S(),$=T(),d=V(I());d.value.allowedExtensions=["png","jpg","jpeg"];const{formulario:r}=c(f),v=V(),C=async i=>{var l;await((l=v.value)==null?void 0:l.resetValidation()),f.typeAction=i,i!="back"&&f.keyList++},t=V([]),y=V([]),F=async()=>{var l;d.value.imageUrl&&(r.value.logo=d.value.imageFile),r.value.id?y.value.logo=[]:y.value.logo=[m(r.value.logo)];const i=await((l=v.value)==null?void 0:l.validate());if(i!=null&&i.valid){r.value.user_id=$.user.id;const s=await f.fetchSave();s.status===200&&(d.value.imageFile=null,C("list")),s.status===422&&(t.value=s.error)}};return j(async()=>{x.companyId&&await f.fetchInfoCompany(x.companyId)}),(i,l)=>(U(),q("div",null,[a(g,null,{default:o(()=>[a(n,{cols:"12",class:"d-flex justify-content-end"},{default:o(()=>[a(L,{color:"secondary",onClick:l[0]||(l[0]=s=>C("list"))},{default:o(()=>[b(" Atras ")]),_:1})]),_:1})]),_:1}),a(e(D),{ref_key:"formValidation",ref:v,"lazy-validation":""},{default:o(()=>[a(K,{title:"Formulario de la compañia"},{default:o(()=>[a(g,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).name,"onUpdate:modelValue":l[1]||(l[1]=s=>e(r).name=s),"error-messages":e(t).name,label:"Nombre de la compañia",maxlength:"30",rules:[e(m)],onKeypress:l[2]||(l[2]=s=>e(t).name="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).nit,"onUpdate:modelValue":l[3]||(l[3]=s=>e(r).nit=s),maxlength:"10","error-messages":e(t).nit,label:"Nit",rules:[e(m),e(p)(e(r).nit,10)],onKeypress:l[4]||(l[4]=s=>{e(t).nit="",e(R)(s)})},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).phone,"onUpdate:modelValue":l[5]||(l[5]=s=>e(r).phone=s),maxlength:"15","error-messages":e(t).phone,label:"Teléfono de la compañia",rules:[e(m),e(k)(e(r).phone,10),e(p)(e(r).phone,15)],onKeypress:l[6]||(l[6]=s=>{e(t).phone="",e(R)(s)})},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),a(g,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).address,"onUpdate:modelValue":l[7]||(l[7]=s=>e(r).address=s),"error-messages":e(t).address,label:"Dirección de la compañia",rules:[e(m)],onKeypress:l[8]||(l[8]=s=>e(t).address="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).email,"onUpdate:modelValue":l[9]||(l[9]=s=>e(r).email=s),type:"email","error-messages":e(t).email,label:"Correo",rules:[e(m),e(w)],onKeypress:l[10]||(l[10]=s=>e(t).email="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[(U(),z(N,{id:"logo",key:e(d).key,"show-size":"",counter:"",label:"Logo","error-messages":e(t).logo,accept:"image/*",rules:e(y).logo,onChange:e(d).handleImageSelected},{default:o(()=>[b(" /> ")]),_:1},8,["error-messages","rules","onChange"]))]),_:1})]),_:1}),a(g,{class:"mb-4"},{default:o(()=>[a(n,{cols:"12"},{default:o(()=>[a(A,{contain:"",src:e(d).imageUrl??e(r).logo,alt:"foto Personal","max-width":200,class:"mx-auto"},null,8,["src"])]),_:1})]),_:1})]),_:1}),a(K,{class:"mt-2",title:"Datos de representante legal"},{default:o(()=>[a(g,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).nameLegalRepresentative,"onUpdate:modelValue":l[11]||(l[11]=s=>e(r).nameLegalRepresentative=s),maxlength:"50","error-messages":e(t).nameLegalRepresentative,label:"Nombre representante legal",rules:[e(m),e(p)(e(r).nameLegalRepresentative,50)],onKeypress:l[12]||(l[12]=s=>e(t).nameLegalRepresentative="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).identification_rep,"onUpdate:modelValue":l[13]||(l[13]=s=>e(r).identification_rep=s),"error-messages":e(t).identification_rep,label:"Cédula de representante legal",maxlength:"15",rules:[e(m),e(p)(e(r).identification_rep,15)],onKeypress:l[14]||(l[14]=s=>e(t).identification_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).phoneLegalRepresentative,"onUpdate:modelValue":l[15]||(l[15]=s=>e(r).phoneLegalRepresentative=s),"error-messages":e(t).phoneLegalRepresentative,label:"Teléfono representante legal",maxlength:"15",rules:[e(m),e(k)(e(r).phoneLegalRepresentative,10),e(p)(e(r).phoneLegalRepresentative,15)],onKeypress:l[16]||(l[16]=s=>e(t).phoneLegalRepresentative="")},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),a(g,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).address_rep,"onUpdate:modelValue":l[17]||(l[17]=s=>e(r).address_rep=s),"error-messages":e(t).address_rep,label:"Dirección de representante legal",maxlength:"50",rules:[e(m),e(p)(e(r).address_rep,50)],onKeypress:l[18]||(l[18]=s=>e(t).address_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(u,{modelValue:e(r).email_rep,"onUpdate:modelValue":l[19]||(l[19]=s=>e(r).email_rep=s),type:"email","error-messages":e(t).email_rep,label:"Correo de representante legal",maxlength:"30",rules:[e(m),e(w),e(p)(e(r).email_rep,30)],onKeypress:l[20]||(l[20]=s=>e(t).email_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1}),a(g,null,{default:o(()=>[a(n,{cols:"12 d-flex justify-content-center"},{default:o(()=>[a(L,{color:"primary",onClick:F},{default:o(()=>[b(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{W as _};
