import{d as j,z as E,j as M,y as Q,k,ar as q,G as b,bj as G,I as H,o as _,c as g,p as l,w as c,m as e,q as o,H as x,A as h,B,K as v,L as y,F as D,a as K,x as p,V as P}from"./index-e5b1715d.js";import{V as $,_ as J,a as O}from"./VPagination-2a43a654.js";import{u as W}from"./useCrudCompanyStore-bd5911b7.js";import{S as X}from"./sweetalert2.all-09c1f25c.js";import{V as Y}from"./VSelect-25a384f7.js";import{V as Z}from"./VSpacer-8ebd0f28.js";import{V as ee}from"./VTextField-7b882186.js";import{V as T}from"./VDivider-8a24bc85.js";import{V as te}from"./VSwitch-8f02751f.js";import{V as ae}from"./VTable-75e60859.js";const le={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ne={style:{width:"10rem"}},oe=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Empresa "),e("th",{scope:"col"}," Nit "),e("th",{scope:"col"}," Plan "),e("th",{scope:"col"}," Nombre representante "),e("th",{scope:"col"}," Teléfono representante "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),re={colspan:"7"},ce=e("td",null,[e("span",null," Plan ")],-1),ie={class:"text-center",style:{width:"5rem"}},ue=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),de=[ue],pe={class:"text-sm text-disabled"},Se=j({__name:"TableList",setup(me){const r=W(),w=E(),N=M(),{currentPage:s,totalPage:m,lastPage:z,totalData:A,companies:f,loading:C}=Q(r),i=k(10),u=k(""),V=async()=>{await r.fetchAll({user_id:w.user.id,perPage:i.value,page:s.value,searchQuery:u.value})};q(async()=>{await V()}),b(s,async()=>{s.value>m.value&&(s.value=m.value)}),b(i,async()=>{s.value=1}),G([s,u,i],async()=>{await V()});const U=H(()=>{const n=f.value.length?(s.value-1)*m.value+1:0,a=f.value.length+(s.value-1)*m.value;return`Mostrando ${n} a ${a} de ${A.value} registros`}),S=async(n,a)=>{r.clearFormulario(),r.typeAction=n,a&&r.fetchInfoCompany(a)},I=n=>{w.company=n,N.push({name:"index"})},L=async(n,a)=>{r.changeState(n,a)},R=async n=>{X.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await r.fetchDelete(n),await V()):a.isDenied})};return(n,a)=>(_(),g(D,null,[l($,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:c(()=>[e("div",le,[l(Y,{modelValue:o(i),"onUpdate:modelValue":a[0]||(a[0]=t=>x(i)?i.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(Z),e("div",se,[e("div",ne,[l(ee,{modelValue:o(u),"onUpdate:modelValue":a[1]||(a[1]=t=>x(u)?u.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(h,{color:"primary",onClick:a[2]||(a[2]=t=>S("form"))},{default:c(()=>[B(" Crear empresa ")]),_:1})])]),_:1}),l(T),l(ae,{class:"text-no-wrap"},{default:c(()=>[oe,e("tbody",null,[v(e("tr",null,[e("td",re,[l(J)])],512),[[y,o(C)]]),(_(!0),g(D,null,K(o(f),(t,F)=>v((_(),g("tr",{key:F,style:{height:"3.75rem"}},[e("td",null,[e("span",null,p(t.name),1)]),e("td",null,[e("span",null,p(t.nit),1)]),ce,e("td",null,[e("span",null,p(t.nameLegalRepresentative),1)]),e("td",null,[e("span",null,p(t.phoneLegalRepresentative),1)]),e("td",null,[l(te,{modelValue:t.state,"onUpdate:modelValue":d=>t.state=d,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:d=>L(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),e("td",ie,[l(h,{icon:"",size:"x-small",color:"error",variant:"text",onClick:d=>R(t.id)},{default:c(()=>[l(P,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:d=>S("form",t.id)},{default:c(()=>[l(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),v(l(h,{color:"primary",onClick:d=>I(t)},{default:c(()=>[B(" Ingresar ")]),_:2},1032,["onClick"]),[[y,t.state===1]])])])),[[y,!o(C)]])),128))]),v(e("tfoot",null,de,512),[[y,!o(f).length]])]),_:1}),l(T),l($,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:c(()=>[e("span",pe,p(o(U)),1),l(O,{modelValue:o(s),"onUpdate:modelValue":a[3]||(a[3]=t=>x(s)?s.value=t:null),size:"small","total-visible":5,length:o(z)},null,8,["modelValue","length"])]),_:1})],64))}});export{Se as _};
