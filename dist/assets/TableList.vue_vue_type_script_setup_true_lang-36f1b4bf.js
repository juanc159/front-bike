import{e as R,g as M,s as Q,r as b,q as j,v as B,x as q,y as G,o as _,c as y,d as a,w as r,a as e,k as s,J as x,E as h,V,b as T,I as $,G as g,H as w,K as H,L as J,t as u,Z as p,S as K}from"./index-5157f066.js";import{_ as Z,V as O}from"./VPagination-4258e78a.js";import{u as W}from"./useCrudSaleStore-eceee0d0.js";import{V as X}from"./VSelect-6157aeab.js";import{V as Y}from"./VSpacer-a82be323.js";import{V as ee}from"./VTextField-f6b14139.js";import{V as z}from"./VDivider-43847767.js";import{V as te}from"./VTable-bba866c0.js";const ae={class:"me-3",style:{width:"80px"}},le={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ne={style:{width:"10rem"}},oe=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Referencia "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Valor Venta "),e("th",{scope:"col"}," Total "),e("th",{scope:"col"}," Utilidades "),e("th",{scope:"col"}," Acciones ")])],-1),ie={colspan:"6"},re={class:"text-center",style:{width:"5rem"}},ce=e("tr",null,[e("td",{colspan:"6",class:"text-center"}," No se encuentran resultados ")],-1),ue=[ce],de={class:"text-sm text-disabled"},ge=R({__name:"TableList",setup(pe){const C=M(),o=W(),{sales:m,totalPage:f,lastPage:P,currentPage:n,totalData:A,loading:S,pathExcel:E,formulario:k}=Q(o),c=b(10),d=b(""),v=async()=>{await o.fetchAll({company_id:C.company.id,perPage:c.value,page:n.value,searchQuery:d.value})};j(async()=>{await v()}),B(n,async()=>{n.value>f.value&&(n.value=f.value)}),B(c,async()=>{n.value=1}),q([n,d,c],async()=>{await v()});const N=G(()=>{const i=m.value.length?(n.value-1)*f.value+1:0,t=m.value.length+(n.value-1)*f.value;return`Mostrando ${i} a ${t} de ${A.value} registros`}),D=async(i,t=null)=>{o.clearFormulario(),o.typeAction=i,t&&(await o.fetchInfo(t),k.value.price_vehicle=p(k.value.price_vehicle))},I=async()=>{await o.excel({company_id:C.company.id}).then(i=>{window.open(E.value,"_blank")})},U=async i=>{K.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await o.fetchDelete(i),await v()):t.isDenied})};return(i,t)=>(_(),y("div",null,[a($,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",ae,[a(X,{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=l=>x(c)?c.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",le,[a(h,{"mt-2":"",size:"x-small",color:"default",variant:"text",title:"Descargar",onClick:t[1]||(t[1]=l=>I())},{default:r(()=>[a(V,{size:"30",icon:"mdi-file-excel"}),T(" Excel ")]),_:1})]),a(Y),e("div",se,[e("div",ne,[a(ee,{modelValue:s(d),"onUpdate:modelValue":t[2]||(t[2]=l=>x(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(h,{color:"primary",onClick:t[3]||(t[3]=l=>D("form"))},{default:r(()=>[T(" Agregar ")]),_:1})])]),_:1}),a(z),a(te,{class:"text-no-wrap"},{default:r(()=>[oe,e("tbody",null,[g(e("tr",null,[e("td",ie,[a(Z)])],512),[[w,s(S)]]),(_(!0),y(H,null,J(s(m),(l,F)=>g((_(),y("tr",{key:F,style:{height:"3.75rem"}},[e("td",null,[e("span",null,u(l.inventory_reference),1)]),e("td",null,[e("span",null,u(s(p)(l.inventory_purchaseValue)),1)]),e("td",null,[e("span",null,u(s(p)(l.price_vehicle)),1)]),e("td",null,[e("span",null,u(s(p)(l.total)),1)]),e("td",null,[e("span",null,u(s(p)(l.utilities)),1)]),e("td",re,[a(h,{size:"x-small",color:"error",variant:"text",onClick:L=>U(l.id)},{default:r(()=>[a(V,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:L=>D("form",l.id)},{default:r(()=>[a(V,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[w,!s(S)]])),128))]),g(e("tfoot",null,ue,512),[[w,!s(m).length]])]),_:1}),a(z),a($,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",de,u(s(N)),1),a(O,{modelValue:s(n),"onUpdate:modelValue":t[4]||(t[4]=l=>x(n)?n.value=l:null),size:"small","total-visible":5,length:s(P)},null,8,["modelValue","length"])]),_:1})]))}});export{ge as _};
