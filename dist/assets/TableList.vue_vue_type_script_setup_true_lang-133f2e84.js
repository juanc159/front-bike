import{d as I,z as M,j as Q,y as j,k,aq as q,L as D,ar as G,N as H,o as _,c as g,p as l,w as c,m as e,q as o,M as x,C as h,E as b,Q as v,R as y,F as B,a as J,x as p,V as P}from"./index-62eefdbf.js";import{V as $,_ as K,a as O}from"./VPagination-d6aadf77.js";import{u as W}from"./useCrudCompanyStore-06c42795.js";import{S as X}from"./sweetalert2.all-09c1f25c.js";import{V as Y}from"./VSelect-099d6728.js";import{V as Z}from"./VSpacer-405bbbb1.js";import{V as ee}from"./VTextField-afc15bd9.js";import{V as N}from"./VDivider-b9b8fa2a.js";import{V as te}from"./VSwitch-9409d18b.js";import{V as ae}from"./VTable-35230ba2.js";const le={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ne={style:{width:"10rem"}},oe=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Empresa "),e("th",{scope:"col"}," Nit "),e("th",{scope:"col"}," Plan "),e("th",{scope:"col"}," Nombre representante "),e("th",{scope:"col"}," Teléfono representante "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),re={colspan:"7"},ce=e("td",null,[e("span",null," Plan ")],-1),ie={class:"text-center",style:{width:"5rem"}},ue=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),de=[ue],pe={class:"text-sm text-disabled"},Se=I({__name:"TableList",setup(me){const r=W(),w=M(),T=Q(),{currentPage:s,totalPage:m,lastPage:z,totalData:R,companies:f,loading:C}=j(r),i=k(10),u=k(""),V=async()=>{await r.fetchAll({user_id:w.user.id,perPage:i.value,page:s.value,searchQuery:u.value})};q(async()=>{await V()}),D(s,async()=>{s.value>m.value&&(s.value=m.value)}),D(i,async()=>{s.value=1}),G([s,u,i],async()=>{await V()});const U=H(()=>{const n=f.value.length?(s.value-1)*m.value+1:0,a=f.value.length+(s.value-1)*m.value;return`Mostrando ${n} a ${a} de ${R.value} registros`}),S=async(n,a)=>{r.clearFormulario(),r.typeAction=n,a&&r.fetchInfoCompany(a)},A=n=>{w.company=n,T.push({name:"index"})},L=async(n,a)=>{r.changeState(n,a)},E=async n=>{X.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await r.fetchDelete(n),await V()):a.isDenied})};return(n,a)=>(_(),g(B,null,[l($,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:c(()=>[e("div",le,[l(Y,{modelValue:o(i),"onUpdate:modelValue":a[0]||(a[0]=t=>x(i)?i.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(Z),e("div",se,[e("div",ne,[l(ee,{modelValue:o(u),"onUpdate:modelValue":a[1]||(a[1]=t=>x(u)?u.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(h,{color:"primary",onClick:a[2]||(a[2]=t=>S("form"))},{default:c(()=>[b(" Crear empresa ")]),_:1})])]),_:1}),l(N),l(ae,{class:"text-no-wrap"},{default:c(()=>[oe,e("tbody",null,[v(e("tr",null,[e("td",re,[l(K)])],512),[[y,o(C)]]),(_(!0),g(B,null,J(o(f),(t,F)=>v((_(),g("tr",{key:F,style:{height:"3.75rem"}},[e("td",null,[e("span",null,p(t.name),1)]),e("td",null,[e("span",null,p(t.nit),1)]),ce,e("td",null,[e("span",null,p(t.nameLegalRepresentative),1)]),e("td",null,[e("span",null,p(t.phoneLegalRepresentative),1)]),e("td",null,[l(te,{modelValue:t.state,"onUpdate:modelValue":d=>t.state=d,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:d=>L(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),e("td",ie,[l(h,{icon:"",size:"x-small",color:"error",variant:"text",onClick:d=>E(t.id)},{default:c(()=>[l(P,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:d=>S("form",t.id)},{default:c(()=>[l(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),v(l(h,{color:"primary",onClick:d=>A(t)},{default:c(()=>[b(" Ingresar ")]),_:2},1032,["onClick"]),[[y,t.state===1]])])])),[[y,!o(C)]])),128))]),v(e("tfoot",null,de,512),[[y,!o(f).length]])]),_:1}),l(N),l($,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:c(()=>[e("span",pe,p(o(U)),1),l(O,{modelValue:o(s),"onUpdate:modelValue":a[3]||(a[3]=t=>x(s)?s.value=t:null),size:"small","total-visible":5,length:o(z)},null,8,["modelValue","length"])]),_:1})],64))}});export{Se as _};
