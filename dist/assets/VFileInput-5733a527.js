import{S as $}from"./sweetalert2.all-09c1f25c.js";import{k as i,L,Y as K,bG as Q,ak as X,$ as Z,N as y,bW as D,a1 as ee,aF as te,p as o,O as V,F as b,aI as le,aJ as ne}from"./index-62eefdbf.js";import{m as ae,a as oe,u as ue,b as M,f as se,c as ie,d as re}from"./VTextField-afc15bd9.js";import{f as ce}from"./forwardRefs-9d31fcaa.js";import{V as de}from"./VChip-e3037494.js";function he(){const e=i(null),s=i(null),g=i(1),f=i(null),l=i([]);function h(){var C;var u=parseInt(event.target.files[0].size/1024);if(u>3e3)return $.fire({icon:"error",title:"Oops...",text:"Debe registrar máximo 3MB",customClass:{container:"my-swal"}}),n(),!1;const r=(C=event.target.files[0].name.split(".").pop())==null?void 0:C.toLowerCase();return l.value.length>0&&!l.value.includes(r)?($.fire({icon:"error",title:"Oops...",text:`Solo se admite archivos con extensiónes: ${l.value.join(", ")}`,customClass:{container:"my-swal"}}),n(),!1):event.target.files.length===0?(n(),!1):(e.value=event.target.files[0],!0)}L(e,u=>{if(!(u instanceof File))return;const r=new FileReader;r.readAsDataURL(u),r.addEventListener("load",()=>{s.value=r.result})});function n(){e.value=null,s.value=null,f.value=null,g.value++}return{imageFile:e,imageUrl:s,handleImageSelected:h,key:g,allowedExtensions:l,clearData:n,name:f}}const Ce=K()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...ae({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Q(e).every(s=>s!=null&&typeof s=="object")},...oe({clearable:!0})},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:g,emit:f,slots:l}=s;const{t:h}=X(),n=Z(e,"modelValue"),{isFocused:u,focus:r,blur:C}=ue(e),w=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),F=y(()=>(n.value??[]).reduce((t,a)=>{let{size:v=0}=a;return t+v},0)),z=y(()=>D(F.value,w.value)),I=y(()=>(n.value??[]).map(t=>{const{name:a="",size:v=0}=t;return e.showSize?`${a} (${D(v,w.value)})`:a})),N=y(()=>{var a;const t=((a=n.value)==null?void 0:a.length)??0;return e.showSize?h(e.counterSizeString,t,z.value):h(e.counterString,t)}),R=i(),P=i(),c=i();function S(){var t;c.value!==document.activeElement&&((t=c.value)==null||t.focus()),u.value||r()}function E(t){B(t)}function U(t){f("mousedown:control",t)}function B(t){var a;(a=c.value)==null||a.click(),f("click:control",t)}function j(t){t.stopPropagation(),S(),le(()=>{n.value=[],ne(e["onClick:clear"],t)})}return L(n,t=>{(!Array.isArray(t)||!t.length)&&c.value&&(c.value.value="")}),ee(()=>{const t=!!(l.counter||e.counter),a=!!(t||l.details),[v,O]=te(g),[{modelValue:fe,...G}]=M.filterProps(e),[J]=se(e);return o(M,V({ref:R,modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-file-input",e.class],style:e.style,"onClick:prepend":E},v,G,{focused:u.value}),{...l,default:m=>{let{id:k,isDisabled:p,isDirty:A,isReadonly:T,isValid:W}=m;return o(ie,V({ref:P,"prepend-icon":e.prependIcon,onMousedown:U,onClick:B,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:k.value,active:A.value||u.value,dirty:A.value,disabled:p.value,focused:u.value,error:W.value===!1}),{...l,default:Y=>{var x;let{props:{class:_,...q}}=Y;return o(b,null,[o("input",V({ref:c,type:"file",readonly:T.value,disabled:p.value,multiple:e.multiple,name:e.name,onClick:d=>{d.stopPropagation(),S()},onChange:d=>{if(!d.target)return;const H=d.target;n.value=[...H.files??[]]},onFocus:S,onBlur:C},q,O),null),o("div",{class:_},[!!((x=n.value)!=null&&x.length)&&(l.selection?l.selection({fileNames:I.value,totalBytes:F.value,totalBytesReadable:z.value}):e.chips?I.value.map(d=>o(de,{key:d,size:"small",color:e.color},{default:()=>[d]})):I.value.join(", "))])])}})},details:a?m=>{var k,p;return o(b,null,[(k=l.details)==null?void 0:k.call(l,m),t&&o(b,null,[o("span",null,null),o(re,{active:!!((p=n.value)!=null&&p.length),value:N.value},l.counter)])])}:void 0})}),ce({},R,P,c)}});export{Ce as V,he as u};
