import{d as Q,z as q,y as G,k as P,I as y,ar as H,G as B,bj as K,o as f,c as _,p as a,w as n,m as t,q as s,H as V,V as x,E as J,K as w,L as b,F as O,a as W,x as r,B as D,A as N}from"./index-333f41b8.js";import{S as X}from"./sweetalert2.all-689f8ffb.js";import{n as h}from"./validators-da167dd6.js";import{V as T,_ as Y,a as Z}from"./VPagination-627eb1b7.js";import{u as tt}from"./useCrudAdministrationStore-d2f2f127.js";import{V as et}from"./VSelect-026de29d.js";import{V as at}from"./VSpacer-87e0b677.js";import{V as st}from"./VTextField-e0c3ad65.js";import{V as A}from"./VDivider-6040cd18.js";import{V as lt}from"./VTable-3c216502.js";import{a as m,V as ot}from"./VRow-d2a2c669.js";const nt={class:"me-3",style:{width:"80px"}},it={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},rt={style:{width:"10rem"}},ct=t("thead",null,[t("tr",null,[t("th",{scope:"col"}," Nombre "),t("th",{scope:"col"}," Fecha Inicial "),t("th",{scope:"col"}," Fecha Final "),t("th",{scope:"col"}," Estado "),t("th",{scope:"col"}," Costo "),t("th",{scope:"col"}," Acciones ")])],-1),ut={colspan:"6"},dt={key:0},mt={key:1},pt={class:"text-center",style:{width:"5rem"}},ft=t("tr",null,[t("td",{colspan:"6",class:"text-center"}," No se encuentran resultados ")],-1),_t=[ft],ht={class:"text-sm text-disabled"},vt=t("h2",null,"Total Sin Pagar",-1),yt=t("h2",null,"Total Pagado",-1),gt=t("h2",null,"Valor Total",-1),At=Q({__name:"TableList",setup(Vt){const F=q(),u=tt(),{administrations:c,totalPage:v,lastPage:$,currentPage:i,totalData:z,loading:C,formulario:S}=G(u),d=P(10),p=P(""),I=y(()=>c.value.reduce((o,e)=>o+Number(e.cost),0)),E=y(()=>c.value.reduce((o,e)=>e.status!=1?o+Number(e.cost):o+0,0)),L=y(()=>c.value.reduce((o,e)=>e.status!=0?o+Number(e.cost):o+0,0)),g=async()=>{await u.fetchAll({company_id:F.company.id,perPage:d.value,page:i.value,searchQuery:p.value})};H(async()=>{await g()}),B(i,async()=>{i.value>v.value&&(i.value=v.value)}),B(d,async()=>{i.value=1}),K([i,p,d],async()=>{await g()});const R=y(()=>{const o=c.value.length?(i.value-1)*v.value+1:0,e=c.value.length+(i.value-1)*v.value;return`Mostrando ${o} a ${e} de ${z.value} registros`}),k=async(o,e=null)=>{u.clearFormulario(),u.typeAction=o,e&&(await u.fetchInfo(e),S.value.cost=h(S.value.cost))},U=async o=>{X.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{e.isConfirmed?(await u.fetchDelete(o),await g()):e.isDenied})};return(o,e)=>(f(),_("div",null,[a(T,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[t("div",nt,[a(et,{modelValue:s(d),"onUpdate:modelValue":e[0]||(e[0]=l=>V(d)?d.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(at),t("div",it,[t("div",rt,[a(st,{modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=l=>V(p)?p.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(x,{color:"primary",onClick:e[2]||(e[2]=l=>k("form"))},{default:n(()=>[J(" Agregar ")]),_:1})])]),_:1}),a(A),a(lt,{class:"text-no-wrap"},{default:n(()=>[ct,t("tbody",null,[w(t("tr",null,[t("td",ut,[a(Y)])],512),[[b,s(C)]]),(f(!0),_(O,null,W(s(c),(l,j)=>w((f(),_("tr",{key:j,style:{height:"3.75rem"}},[t("td",null,[t("span",null,r(l.name),1)]),t("td",null,[t("span",null,r(l.init_date),1)]),t("td",null,[t("span",null,r(l.final_date),1)]),t("td",null,[l.status==1?(f(),_("span",dt," Pagado ")):D("",!0),l.status==0?(f(),_("span",mt," Sin Pagar ")):D("",!0)]),t("td",null,[t("span",null,r(s(h)(l.cost)),1)]),t("td",pt,[a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:M=>k("form",l.id)},{default:n(()=>[a(N,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(x,{size:"x-small",color:"error",variant:"text",onClick:M=>U(l.id)},{default:n(()=>[a(N,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])])),[[b,!s(C)]])),128))]),w(t("tfoot",null,_t,512),[[b,!s(c).length]])]),_:1}),a(A),a(T,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[t("span",ht,r(s(R)),1),a(Z,{modelValue:s(i),"onUpdate:modelValue":e[3]||(e[3]=l=>V(i)?i.value=l:null),size:"small","total-visible":5,length:s($)},null,8,["modelValue","length"])]),_:1}),a(ot,{class:"mt-5 mb-5"},{default:n(()=>[a(m,{sm:"6"},{default:n(()=>[vt]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(h)(s(E))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[yt]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(h)(s(L))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[gt]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(h)(s(I))),1)]),_:1})]),_:1})]))}});export{At as _};
