import{d as F,z as E,y as I,k as C,aq as L,L as D,ar as M,N as Q,o as h,c as v,p as a,w as c,m as e,q as o,M as y,C as _,E as U,Q as V,R as g,F as S,a as q,x as m,V as b}from"./index-62eefdbf.js";import{V as k,_ as j,a as G}from"./VPagination-d6aadf77.js";import{u as H}from"./useCrudRoleStore-322c3f41.js";import{S as J}from"./sweetalert2.all-09c1f25c.js";import{V as K}from"./VSelect-099d6728.js";import{V as O}from"./VSpacer-405bbbb1.js";import{V as W}from"./VTextField-afc15bd9.js";import{V as B}from"./VDivider-b9b8fa2a.js";import{V as X}from"./VTable-35230ba2.js";const Y={class:"me-3",style:{width:"80px"}},Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{width:"10rem"}},te=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Nombre "),e("th",{scope:"col"}," Descripcón "),e("th",{scope:"col"}," Empresa "),e("th",{scope:"col"}," Acciones ")])],-1),ae={colspan:"4"},le={class:"text-center",style:{width:"5rem"}},se=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),oe=[se],ne={class:"text-sm text-disabled"},ye=F({__name:"TableList",setup(re){const N=E(),n=H(),{roles:d,totalPage:p,lastPage:P,currentPage:s,totalData:R,loading:x}=I(n),r=C(10),u=C(""),f=async()=>{await n.fetchAll({company_id:N.company.id,perPage:r.value,page:s.value,searchQuery:u.value})};L(async()=>{await f()}),D(s,async()=>{s.value>p.value&&(s.value=p.value)}),D(r,async()=>{s.value=1}),M([s,u,r],async()=>{await f()});const T=Q(()=>{const i=d.value.length?(s.value-1)*p.value+1:0,t=d.value.length+(s.value-1)*p.value;return`Mostrando ${i} a ${t} de ${R.value} registros`}),w=async(i,t=null)=>{n.clearFormulario(),n.typeAction=i,t&&n.fetchInfoRole(t)},$=async i=>{J.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await n.fetchDelete(i),await f()):t.isDenied})};return(i,t)=>(h(),v(S,null,[a(k,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:c(()=>[e("div",Y,[a(K,{modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=l=>y(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(O),e("div",Z,[e("div",ee,[a(W,{modelValue:o(u),"onUpdate:modelValue":t[1]||(t[1]=l=>y(u)?u.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(_,{color:"primary",onClick:t[2]||(t[2]=l=>w("form"))},{default:c(()=>[U(" Agregar ")]),_:1})])]),_:1}),a(B),a(X,{class:"text-no-wrap"},{default:c(()=>[te,e("tbody",null,[V(e("tr",null,[e("td",ae,[a(j)])],512),[[g,o(x)]]),(h(!0),v(S,null,q(o(d),(l,z)=>V((h(),v("tr",{key:z,style:{height:"3.75rem"}},[e("td",null,[e("span",null,m(l.name),1)]),e("td",null,[e("span",null,m(l.description),1)]),e("td",null,[e("span",null,m(l.company_name),1)]),e("td",le,[a(_,{icon:"",size:"x-small",color:"error",variant:"text",onClick:A=>$(l.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(_,{icon:"",size:"x-small",color:"default",variant:"text",onClick:A=>w("form",l.id)},{default:c(()=>[a(b,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[g,!o(x)]])),128))]),V(e("tfoot",null,oe,512),[[g,!o(d).length]])]),_:1}),a(B),a(k,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:c(()=>[e("span",ne,m(o(T)),1),a(G,{modelValue:o(s),"onUpdate:modelValue":t[3]||(t[3]=l=>y(s)?s.value=l:null),size:"small","total-visible":5,length:o(P)},null,8,["modelValue","length"])]),_:1})],64))}});export{ye as _};
