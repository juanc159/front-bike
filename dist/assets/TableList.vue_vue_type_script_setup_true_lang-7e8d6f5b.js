import{e as Q,g as R,s as j,r as b,q,v as T,x as G,y as H,o as u,c as v,d as l,w as r,a as e,k as o,J as g,E as _,b as y,I as $,G as x,H as w,K as J,L as K,h as C,t as c,l as S,Z,V as z,S as O}from"./index-5157f066.js";import{_ as W,V as X}from"./VPagination-4258e78a.js";import{u as Y}from"./useCrudInventoryStore-c67f8e80.js";import{V as P}from"./VSelect-6157aeab.js";import{V as ee}from"./VSpacer-a82be323.js";import{V as ae}from"./VTextField-f6b14139.js";import{V as I}from"./VDivider-43847767.js";import{V as k}from"./VChip-1ee9a6c4.js";import{V as te}from"./VTable-bba866c0.js";const le={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},oe={style:{width:"10rem"}},ne=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Dias "),e("th",{scope:"col"}," Tipo de Vehículo "),e("th",{scope:"col"}," Marca "),e("th",{scope:"col"}," Modelo "),e("th",{scope:"col"}," Placa "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),re={colspan:"10"},ce={class:"text-center d-flex justify-content-center aling-items-center"},ie=e("tr",null,[e("td",{colspan:"10",class:"text-center"}," No se encuentran resultados ")],-1),de=[ie],ue={class:"text-sm text-disabled"},we=Q({__name:"TableList",setup(pe){const A=R(),i=Y(),{inventories:f,totalPage:m,lastPage:N,currentPage:s,totalData:U,loading:D}=j(i),d=b(10),p=b(""),V=async()=>{await i.fetchAll({company_id:A.company.id,perPage:d.value,page:s.value,searchQuery:p.value})};q(async()=>{await V()}),T(s,async()=>{s.value>m.value&&(s.value=m.value)}),T(d,async()=>{s.value=1}),G([s,p,d],async()=>{await V()});const M=H(()=>{const n=f.value.length?(s.value-1)*m.value+1:0,t=f.value.length+(s.value-1)*m.value;return`Mostrando ${n} a ${t} de ${U.value} registros`}),B=async(n,t=null)=>{i.clearFormulario(),i.typeAction=n,t&&i.fetchInfo(t)},E=async n=>{O.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await i.fetchDelete(n),await V()):t.isDenied})},F=n=>{i.changeSate(n.id,n.state)};return(n,t)=>(u(),v("div",null,[l($,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",le,[l(P,{modelValue:o(d),"onUpdate:modelValue":t[0]||(t[0]=a=>g(d)?d.value=a:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(ee),e("div",se,[e("div",oe,[l(ae,{modelValue:o(p),"onUpdate:modelValue":t[1]||(t[1]=a=>g(p)?p.value=a:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(_,{color:"primary",onClick:t[2]||(t[2]=a=>B("form"))},{default:r(()=>[y(" Agregar ")]),_:1})])]),_:1}),l(I),l(te,{class:"text-no-wrap"},{default:r(()=>[ne,e("tbody",null,[x(e("tr",null,[e("td",re,[l(W)])],512),[[w,o(D)]]),(u(!0),v(J,null,K(o(f),(a,L)=>x((u(),v("tr",{key:L,style:{height:"3.75rem"}},[e("td",null,[a.days<30?(u(),C(k,{key:0,size:"large",color:"success"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0),a.days>=16&&a.days<=30?(u(),C(k,{key:1,size:"large",color:"warning"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0),a.days>30?(u(),C(k,{key:2,size:"large",color:"error"},{default:r(()=>[y(c(a.days),1)]),_:2},1024)):S("",!0)]),e("td",null,[e("span",null,c(a.vehicleType),1)]),e("td",null,[e("span",null,c(a.brand),1)]),e("td",null,[e("span",null,c(a.model),1)]),e("td",null,[e("span",null,c(a.plate),1)]),e("td",null,[e("span",null,"$ "+c(o(Z)(a.purchaseValue)),1)]),e("td",null,[l(P,{modelValue:a.state,"onUpdate:modelValue":[h=>a.state=h,h=>F(a)],items:["Ingresado","Separado","Vendido"]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ce,[l(_,{class:"mr-2",icon:"",size:"x-small",color:"error",onClick:h=>E(a.id)},{default:r(()=>[l(z,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(_,{class:"mr-2",icon:"",size:"x-small",color:"default",onClick:h=>B("form",a.id)},{default:r(()=>[l(z,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[w,!o(D)]])),128))]),x(e("tfoot",null,de,512),[[w,!o(f).length]])]),_:1}),l(I),l($,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",ue,c(o(M)),1),l(X,{modelValue:o(s),"onUpdate:modelValue":t[3]||(t[3]=a=>g(s)?s.value=a:null),size:"small","total-visible":5,length:o(N)},null,8,["modelValue","length"])]),_:1})]))}});export{we as _};
