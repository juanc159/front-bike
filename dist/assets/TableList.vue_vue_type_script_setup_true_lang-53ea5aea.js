import{d as M,z as Q,y as q,k,I as v,ar as G,G as P,bj as H,o as f,c as _,p as a,w as n,m as t,q as s,H as V,A as x,B as K,K as w,L as C,F as J,a as O,x as r,C as B,V as D}from"./index-13e9e9f8.js";import{S as W}from"./sweetalert2.all-09c1f25c.js";import{n as y}from"./validators-e0eb24cc.js";import{V as N,_ as X,a as Y}from"./VPagination-1ec261be.js";import{u as Z}from"./useCrudAdministrationStore-6b2ae658.js";import{V as tt}from"./VSelect-457fc5fa.js";import{V as et}from"./VSpacer-4c15bfe5.js";import{V as at}from"./VTextField-2e327a5c.js";import{V as T}from"./VDivider-bc2a7ae6.js";import{V as st}from"./VTable-a9c2f071.js";import{a as m,V as lt}from"./VRow-cb5cfbd1.js";const ot={class:"me-3",style:{width:"80px"}},nt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},it={style:{width:"10rem"}},rt=t("thead",null,[t("tr",null,[t("th",{scope:"col"}," Nombre "),t("th",{scope:"col"}," Fecha Inicial "),t("th",{scope:"col"}," Fecha Final "),t("th",{scope:"col"}," Estado "),t("th",{scope:"col"}," Costo "),t("th",{scope:"col"}," Acciones ")])],-1),ct={colspan:"6"},ut={key:0},dt={key:1},mt={class:"text-center",style:{width:"5rem"}},pt=t("tr",null,[t("td",{colspan:"6",class:"text-center"}," No se encuentran resultados ")],-1),ft=[pt],_t={class:"text-sm text-disabled"},ht=t("h2",null,"Total Sin Pagar",-1),vt=t("h2",null,"Total Pagado",-1),yt=t("h2",null,"Valor Total",-1),Tt=M({__name:"TableList",setup(gt){const A=Q(),u=Z(),{administrations:c,totalPage:h,lastPage:F,currentPage:i,totalData:$,loading:b}=q(u),d=k(10),p=k(""),z=v(()=>c.value.reduce((o,e)=>o+Number(e.cost),0)),I=v(()=>c.value.reduce((o,e)=>e.status!=1?o+Number(e.cost):o+0,0)),L=v(()=>c.value.reduce((o,e)=>e.status!=0?o+Number(e.cost):o+0,0)),g=async()=>{await u.fetchAll({company_id:A.company.id,perPage:d.value,page:i.value,searchQuery:p.value})};G(async()=>{await g()}),P(i,async()=>{i.value>h.value&&(i.value=h.value)}),P(d,async()=>{i.value=1}),H([i,p,d],async()=>{await g()});const R=v(()=>{const o=c.value.length?(i.value-1)*h.value+1:0,e=c.value.length+(i.value-1)*h.value;return`Mostrando ${o} a ${e} de ${$.value} registros`}),S=async(o,e=null)=>{u.clearFormulario(),u.typeAction=o,e&&u.fetchInfo(e)},U=async o=>{W.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{e.isConfirmed?(await u.fetchDelete(o),await g()):e.isDenied})};return(o,e)=>(f(),_("div",null,[a(N,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[t("div",ot,[a(tt,{modelValue:s(d),"onUpdate:modelValue":e[0]||(e[0]=l=>V(d)?d.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(et),t("div",nt,[t("div",it,[a(at,{modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=l=>V(p)?p.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(x,{color:"primary",onClick:e[2]||(e[2]=l=>S("form"))},{default:n(()=>[K(" Agregar ")]),_:1})])]),_:1}),a(T),a(st,{class:"text-no-wrap"},{default:n(()=>[rt,t("tbody",null,[w(t("tr",null,[t("td",ct,[a(X)])],512),[[C,s(b)]]),(f(!0),_(J,null,O(s(c),(l,j)=>w((f(),_("tr",{key:j,style:{height:"3.75rem"}},[t("td",null,[t("span",null,r(l.name),1)]),t("td",null,[t("span",null,r(l.init_date),1)]),t("td",null,[t("span",null,r(l.final_date),1)]),t("td",null,[l.status==1?(f(),_("span",ut," Pagado ")):B("",!0),l.status==0?(f(),_("span",dt," Sin Pagar ")):B("",!0)]),t("td",null,[t("span",null,r(s(y)(l.cost)),1)]),t("td",mt,[a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:E=>S("form",l.id)},{default:n(()=>[a(D,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(x,{size:"x-small",color:"error",variant:"text",onClick:E=>U(l.id)},{default:n(()=>[a(D,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])])),[[C,!s(b)]])),128))]),w(t("tfoot",null,ft,512),[[C,!s(c).length]])]),_:1}),a(T),a(N,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[t("span",_t,r(s(R)),1),a(Y,{modelValue:s(i),"onUpdate:modelValue":e[3]||(e[3]=l=>V(i)?i.value=l:null),size:"small","total-visible":5,length:s(F)},null,8,["modelValue","length"])]),_:1}),a(lt,{class:"mt-5 mb-5"},{default:n(()=>[a(m,{sm:"6"},{default:n(()=>[ht]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(y)(s(I))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[vt]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(y)(s(L))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[yt]),_:1}),a(m,{sm:"6"},{default:n(()=>[t("h2",null,r(s(y)(s(z))),1)]),_:1})]),_:1})]))}});export{Tt as _};
