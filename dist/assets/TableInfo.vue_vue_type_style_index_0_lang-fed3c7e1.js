import{_ as S}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-395fb60e.js";import{u as D}from"./useCrudMecanicStore-9ec240a8.js";import{d as N,z as P,y as A,k as f,I as B,o as M,c as z,p as e,w as t,q as l,V as p,E as _,H as $,m as k,x as R,A as U}from"./index-ecce922e.js";import{u as E}from"./useCrudIncomeVehicleStore-af97f5d6.js";import{V as y,a as r}from"./VRow-1ecd9fa6.js";import{V as O}from"./VContainer-c4cd337c.js";import{V}from"./VDivider-32b31792.js";import{V as b}from"./VDataTable-6b5c6364.js";import{d as j,V as q}from"./VCard-faf2a96d.js";const H={class:"d-flex justify-content-end my-4"},G=k("h3",null,"Total a pagar ",-1),le=N({__name:"TableInfo",setup(J){const g=E();P();const i=D(),{formulario:c,incomeVehiclesSi:I,incomeVehiclesNo:v}=A(i),C=async(m,a=null)=>{i.clearFormulario(),i.typeAction=m,a&&g.fetchInfo(a)},F=[{title:"Tipo de vehiculo",key:"type_vehicle"},{title:"Marca",key:"brand"},{title:"Fecha de ingreso",key:"date_init"},{title:"Pago mano de obra",key:"pay_labor"},{title:"Valor mano de obra 60%",key:"paid_labor"},{title:"Fecha Pago Mano De Obra",key:"date_pay_labor"}],w=[{title:"Tipo de vehiculo",key:"type_vehicle"},{title:"Marca",key:"brand"},{title:"Fecha de ingreso",key:"date_init"},{title:"Pago mano de obra",key:"pay_labor"},{title:"Valor mano de obra 60%",key:"paid_labor"},{title:"Fecha Pago Mano De Obra",key:"date_pay_labor"},{title:"AcciÃ³n",key:"actions"}],s=f([]),u=f(!1),h=B(()=>v.value.filter(a=>s.value.includes(a.id)).reduce((a,d)=>a+Number(d.paid_labor??0),0)),x=async()=>{u.value=!0,await i.fetchPay({mecanic_id:c.value.id,totalPay:h.value,selected:s.value}),await i.fetchInfo({id:c.value.id}),u.value=!1},n=f({dateInitial:null,dateFinal:null}),T=async()=>{await i.fetchInfo({id:c.value.id,dateInitial:n.value.dateInitial,dateFinal:n.value.dateFinal})};return(m,a)=>{const d=S;return M(),z("div",null,[e(O,{fluid:""},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{cols:"12",sm:"5"},{default:t(()=>[e(d,{label:"Fecha inicial",modelValue:l(n).dateInitial,"onUpdate:modelValue":a[0]||(a[0]=o=>l(n).dateInitial=o)},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"5"},{default:t(()=>[e(d,{label:"Fecha final",modelValue:l(n).dateFinal,"onUpdate:modelValue":a[1]||(a[1]=o=>l(n).dateFinal=o)},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"2",class:"mt-7"},{default:t(()=>[e(p,{color:"primary",onClick:a[2]||(a[2]=o=>T())},{default:t(()=>[_("Buscar")]),_:1})]),_:1})]),_:1})]),_:1}),e(V),e(l(b),{headers:F,items:l(v),"items-per-page":5,modelValue:l(s),"onUpdate:modelValue":a[3]||(a[3]=o=>$(s)?s.value=o:null),"show-select":!0},null,8,["items","modelValue"]),e(V),k("div",H,[e(q,{width:"400px"},{default:t(()=>[e(j,null,{default:t(()=>[e(y,null,{default:t(()=>[e(r,null,{default:t(()=>[G,_(" "+R(l(h)),1)]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(r,null,{default:t(()=>[e(p,{loading:l(u),color:"success",onClick:a[4]||(a[4]=o=>x())},{default:t(()=>[_("Pagar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),e(V,{class:"mt-6"}),e(l(b),{headers:w,items:l(I),"items-per-page":5},{"item.actions":t(({item:o})=>[e(p,{icon:"",size:"x-small",color:"default",variant:"text",onClick:K=>C("visualizeData",o.raw.id)},{default:t(()=>[e(U,{size:"22",icon:"mdi-eye"})]),_:2},1032,["onClick"])]),_:1},8,["items"])])}}});export{le as _};
