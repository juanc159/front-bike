import{u as N,V as B}from"./VFileInput-394659a3.js";import{u as S}from"./useCrudCompanyStore-8833aa9c.js";import{e as j,g as T,r as V,s as A,q as M,o as U,c as _,d as r,w as o,B as n,E as R,b,A as p,C as L,k as e,Q as u,U as g,W as $,a0 as k,R as K,h as q,j as D,$ as E}from"./index-5157f066.js";import{V as m}from"./VTextField-f6b14139.js";import{V as z}from"./VForm-8fa3c58d.js";const J=j({__name:"Form",props:{companyId:{type:Number,default:null,required:!1}},setup(w){const x=w,f=S(),I=T(),d=V(N());d.value.allowedExtensions=["png","jpg","jpeg"];const{formulario:a}=A(f),v=V(),C=async i=>{var l;await((l=v.value)==null?void 0:l.resetValidation()),f.typeAction=i,i!="back"&&f.keyList++},t=V([]),y=V([]),F=async()=>{var l;d.value.imageUrl&&(a.value.logo=d.value.imageFile),a.value.id?y.value.logo=[]:y.value.logo=[u(a.value.logo)],a.value.base=a.value.base.replaceAll(".","");const i=await((l=v.value)==null?void 0:l.validate());if(i!=null&&i.valid){a.value.user_id=I.user.id;const s=await f.fetchSave();s.status===200&&(d.value.imageFile=null,C("list")),s.status===422&&(t.value=s.error)}};return M(async()=>{x.companyId&&await f.fetchInfoCompany(x.companyId)}),(i,l)=>(U(),_("div",null,[r(p,null,{default:o(()=>[r(n,{cols:"12",class:"d-flex justify-content-end"},{default:o(()=>[r(R,{color:"secondary",onClick:l[0]||(l[0]=s=>C("list"))},{default:o(()=>[b(" Atras ")]),_:1})]),_:1})]),_:1}),r(e(z),{ref_key:"formValidation",ref:v,"lazy-validation":""},{default:o(()=>[r(L,{title:"Formulario de la compañia"},{default:o(()=>[r(p,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).name,"onUpdate:modelValue":l[1]||(l[1]=s=>e(a).name=s),"error-messages":e(t).name,label:"Nombre de la compañia",maxlength:"30",rules:[e(u)],onKeypress:l[2]||(l[2]=s=>e(t).name="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).nit,"onUpdate:modelValue":l[3]||(l[3]=s=>e(a).nit=s),maxlength:"10","error-messages":e(t).nit,label:"Nit",rules:[e(u),e(g)(e(a).nit,10)],onKeypress:l[4]||(l[4]=s=>{e(t).nit="",e($)(s)})},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).phone,"onUpdate:modelValue":l[5]||(l[5]=s=>e(a).phone=s),maxlength:"15","error-messages":e(t).phone,label:"Teléfono de la compañia",rules:[e(u),e(k)(e(a).phone,10),e(g)(e(a).phone,15)],onKeypress:l[6]||(l[6]=s=>{e(t).phone="",e($)(s)})},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),r(p,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).address,"onUpdate:modelValue":l[7]||(l[7]=s=>e(a).address=s),"error-messages":e(t).address,label:"Dirección de la compañia",rules:[e(u)],onKeypress:l[8]||(l[8]=s=>e(t).address="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).email,"onUpdate:modelValue":l[9]||(l[9]=s=>e(a).email=s),type:"email","error-messages":e(t).email,label:"Correo",rules:[e(u),e(K)],onKeypress:l[10]||(l[10]=s=>e(t).email="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[(U(),q(B,{id:"logo",key:e(d).key,"show-size":"",counter:"",label:"Logo","error-messages":e(t).logo,accept:"image/*",rules:e(y).logo,onChange:e(d).handleImageSelected},{default:o(()=>[b(" /> ")]),_:1},8,["error-messages","rules","onChange"]))]),_:1})]),_:1}),r(p,{class:"mb-4"},{default:o(()=>[r(n,{cols:"12"},{default:o(()=>[r(D,{contain:"",src:e(d).imageUrl??e(a).logo,alt:"foto Personal","max-width":200,class:"mx-auto"},null,8,["src"])]),_:1})]),_:1})]),_:1}),r(L,{class:"mt-2",title:"Datos de representante legal"},{default:o(()=>[r(p,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).nameLegalRepresentative,"onUpdate:modelValue":l[11]||(l[11]=s=>e(a).nameLegalRepresentative=s),maxlength:"50","error-messages":e(t).nameLegalRepresentative,label:"Nombre representante legal",rules:[e(u),e(g)(e(a).nameLegalRepresentative,50)],onKeypress:l[12]||(l[12]=s=>e(t).nameLegalRepresentative="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).identification_rep,"onUpdate:modelValue":l[13]||(l[13]=s=>e(a).identification_rep=s),"error-messages":e(t).identification_rep,label:"Cédula de representante legal",maxlength:"15",rules:[e(u),e(g)(e(a).identification_rep,15)],onKeypress:l[14]||(l[14]=s=>e(t).identification_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).phoneLegalRepresentative,"onUpdate:modelValue":l[15]||(l[15]=s=>e(a).phoneLegalRepresentative=s),"error-messages":e(t).phoneLegalRepresentative,label:"Teléfono representante legal",maxlength:"15",rules:[e(u),e(k)(e(a).phoneLegalRepresentative,10),e(g)(e(a).phoneLegalRepresentative,15)],onKeypress:l[16]||(l[16]=s=>e(t).phoneLegalRepresentative="")},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),r(p,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).address_rep,"onUpdate:modelValue":l[17]||(l[17]=s=>e(a).address_rep=s),"error-messages":e(t).address_rep,label:"Dirección de representante legal",maxlength:"50",rules:[e(u),e(g)(e(a).address_rep,50)],onKeypress:l[18]||(l[18]=s=>e(t).address_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).email_rep,"onUpdate:modelValue":l[19]||(l[19]=s=>e(a).email_rep=s),type:"email","error-messages":e(t).email_rep,label:"Correo de representante legal",maxlength:"30",rules:[e(u),e(K),e(g)(e(a).email_rep,30)],onKeypress:l[20]||(l[20]=s=>e(t).email_rep="")},null,8,["modelValue","error-messages","rules"])]),_:1}),r(n,{cols:"4"},{default:o(()=>[r(m,{modelValue:e(a).base,"onUpdate:modelValue":l[21]||(l[21]=s=>e(a).base=s),"error-messages":e(t).base,label:"Base",onBlur:l[22]||(l[22]=s=>e(a).base=e(E)(e(a).base)),rules:[e(u)],onKeypress:l[23]||(l[23]=s=>e(t).base="")},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1}),r(p,null,{default:o(()=>[r(n,{cols:"12 d-flex justify-content-center"},{default:o(()=>[r(R,{color:"primary",onClick:F},{default:o(()=>[b(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{J as _};
