import{u as $}from"./useCrudInventoryStore-c40b9d21.js";import{d as U,k as v,z as w,y as K,ar as I,o as c,c as N,b as T,w as s,p as o,m as A,V as g,E as b,B as q,q as e}from"./index-ecce922e.js";import{r as n,v as F}from"./validators-da167dd6.js";import{a as u,V as f}from"./VRow-1ecd9fa6.js";import{V as M}from"./VSelect-d4be5138.js";import{V as m}from"./VTextField-a151c4b5.js";import{V as R}from"./VForm-a9ea2bae.js";const j={class:"col-md-6 d-flex justify-content-end"},J=U({__name:"Form",props:{userId:{type:Number,default:null,required:!1},btnBack:{type:Boolean,default:!0,required:!1}},emits:["executeAction"],setup(k,{emit:x}){const p=k,V=v(),S=w(),i=$(),{formulario:a}=K(i),t=v([]),B=v([]),y=async d=>{var l;i.typeAction=d,B.value=[],t.value=[],await((l=V.value)==null?void 0:l.resetValidation()),d!="back"&&i.keyList++},C=async()=>{var l;a.value.company_id=S.company.id;const d=await((l=V.value)==null?void 0:l.validate());if(d!=null&&d.valid){a.value.purchaseValue=a.value.purchaseValue.replaceAll(".","");const r=await i.fetchSave();r.status===200&&(y("list"),x("executeAction",{save:!0})),r.status===422&&(t.value=r.error)}};return I(async()=>{p.userId&&await i.fetchInfo(p.userId)}),(d,l)=>(c(),N("div",null,[p.btnBack==!0?(c(),T(f,{key:0},{default:s(()=>[o(u,{cols:"12"},{default:s(()=>[A("div",j,[o(g,{color:"secondary",onClick:l[0]||(l[0]=r=>y("back"))},{default:s(()=>[b(" Atras ")]),_:1})])]),_:1})]),_:1})):q("",!0),o(e(R),{ref_key:"formValidation",ref:V,"lazy-validation":""},{default:s(()=>[o(f,null,{default:s(()=>[o(u,{cols:"12",md:"4"},{default:s(()=>[o(M,{items:["moto","carro"],modelValue:e(a).vehicleType,"onUpdate:modelValue":l[1]||(l[1]=r=>e(a).vehicleType=r),label:"Tipo de VehÃ­culo",rules:[e(n)]},null,8,["modelValue","rules"])]),_:1}),o(u,{cols:"12",md:"4"},{default:s(()=>[o(m,{modelValue:e(a).reference,"onUpdate:modelValue":l[2]||(l[2]=r=>e(a).reference=r),rules:[e(n)],autocomplete:"off","error-messages":e(t).reference,label:"Referencia",onKeypress:l[3]||(l[3]=r=>e(t).reference="")},null,8,["modelValue","rules","error-messages"])]),_:1}),o(u,{cols:"12",md:"4"},{default:s(()=>[o(m,{modelValue:e(a).brand,"onUpdate:modelValue":l[4]||(l[4]=r=>e(a).brand=r),rules:[e(n)],"error-messages":e(t).brand,label:"Marca",onKeypress:l[5]||(l[5]=r=>e(t).brand="")},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1}),o(f,null,{default:s(()=>[o(u,{cols:"12",md:"4"},{default:s(()=>[o(m,{modelValue:e(a).model,"onUpdate:modelValue":l[6]||(l[6]=r=>e(a).model=r),rules:[e(n)],"error-messages":e(t).model,label:"Modelo",onKeypress:l[7]||(l[7]=r=>e(t).model="")},null,8,["modelValue","rules","error-messages"])]),_:1}),o(u,{cols:"12",md:"4"},{default:s(()=>[o(m,{modelValue:e(a).color,"onUpdate:modelValue":l[8]||(l[8]=r=>e(a).color=r),maxlength:"10",rules:[e(n)],"error-messages":e(t).color,label:"Color",onKeypress:l[9]||(l[9]=r=>{e(t).color=""})},null,8,["modelValue","rules","error-messages"])]),_:1}),o(u,{cols:"12",md:"4"},{default:s(()=>[o(m,{modelValue:e(a).plate,"onUpdate:modelValue":l[10]||(l[10]=r=>e(a).plate=r),maxlength:"15",rules:[e(n)],"error-messages":e(t).plate,label:"Placa",onKeypress:l[11]||(l[11]=r=>{e(t).plate=""})},null,8,["modelValue","rules","error-messages"])]),_:1}),o(u,{cols:"12",md:"6"},{default:s(()=>[o(m,{modelValue:e(a).registrationSite,"onUpdate:modelValue":l[12]||(l[12]=r=>e(a).registrationSite=r),maxlength:"15",rules:[e(n)],"error-messages":e(t).registrationSite,label:"Sitio de matricula",onKeypress:l[13]||(l[13]=r=>{e(t).registrationSite=""})},null,8,["modelValue","rules","error-messages"])]),_:1}),o(u,{cols:"12",md:"6"},{default:s(()=>[o(m,{modelValue:e(a).purchaseValue,"onUpdate:modelValue":l[14]||(l[14]=r=>e(a).purchaseValue=r),maxlength:"15",rules:[e(n)],"error-messages":e(t).purchaseValue,label:"Valor de Compra",onKeypress:l[15]||(l[15]=r=>{e(t).purchaseValue=""}),onBlur:l[16]||(l[16]=r=>e(a).purchaseValue=e(F)(e(a).purchaseValue))},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1}),o(f,null,{default:s(()=>[o(u,{cols:"12 d-flex justify-content-center"},{default:s(()=>[o(g,{color:"primary",onClick:C},{default:s(()=>[b(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{J as _};
