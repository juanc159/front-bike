import{d as I,z as F,y as M,k as S,ar as E,G as b,bj as L,I as U,o as u,c as m,p as t,w as n,m as e,q as s,H as y,V as h,E as j,K as x,L as V,F as Q,a as R,x as g,A as w}from"./index-ecce922e.js";import{S as q}from"./sweetalert2.all-09c1f25c.js";import{_ as G,V as H}from"./VPagination-b0fd92c0.js";import{u as K}from"./useCrudMecanicStore-9ec240a8.js";import{V as J}from"./VSelect-d4be5138.js";import{V as O}from"./VSpacer-07cad1f4.js";import{V as W}from"./VTextField-a151c4b5.js";import{V as D}from"./VContainer-c4cd337c.js";import{V as B}from"./VDivider-32b31792.js";import{V as X}from"./VTable-1a3fdd4b.js";const Y={class:"me-3",style:{width:"80px"}},Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{width:"10rem"}},te=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Nombre Completo "),e("th",{scope:"col"}," Cédula "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),ae={colspan:"4"},le={key:0},oe={key:1},se={class:"text-center",style:{width:"5rem"}},ne=e("tr",null,[e("td",{colspan:"4",class:"text-center"}," No se encuentran resultados ")],-1),ie=[ne],re={class:"text-sm text-disabled"},Ve=I({__name:"TableList",setup(ce){const z=F(),i=K(),{mecanic:p,totalPage:f,lastPage:A,currentPage:o,totalData:$,loading:C}=M(i),r=S(10),d=S(""),v=async()=>{await i.fetchAll({perPage:r.value,page:o.value,searchQuery:d.value,company_id:z.company.id})};E(async()=>{await v()}),b(o,async()=>{o.value>f.value&&(o.value=f.value)}),b(r,async()=>{o.value=1}),L([o,d,r],async()=>{await v()});const P=U(()=>{const c=p.value.length?(o.value-1)*f.value+1:0,a=p.value.length+(o.value-1)*f.value;return`Mostrando ${c} a ${a} de ${$.value} registros`}),_=async(c,a=null)=>{i.clearFormulario(),i.typeAction=c,a&&i.fetchInfo({id:a})},T=async c=>{q.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await i.fetchDelete(c),await v()):a.isDenied})};return(c,a)=>(u(),m("div",null,[t(D,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[e("div",Y,[t(J,{modelValue:s(r),"onUpdate:modelValue":a[0]||(a[0]=l=>y(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(O),e("div",Z,[e("div",ee,[t(W,{modelValue:s(d),"onUpdate:modelValue":a[1]||(a[1]=l=>y(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),t(h,{color:"primary",onClick:a[2]||(a[2]=l=>_("form"))},{default:n(()=>[j(" Agregar ")]),_:1})])]),_:1}),t(B),t(X,{class:"text-no-wrap"},{default:n(()=>[te,e("tbody",null,[x(e("tr",null,[e("td",ae,[t(G)])],512),[[V,s(C)]]),(u(!0),m(Q,null,R(s(p),(l,N)=>x((u(),m("tr",{key:N,style:{height:"3.75rem"}},[e("td",null,[e("span",null,g(l.name+" "+l.last_name),1)]),e("td",null,[e("span",null,g(l.identify),1)]),e("td",null,[l.status==1?(u(),m("span",le," Activo ")):(u(),m("span",oe," Inactivo "))]),e("td",se,[t(h,{size:"x-small",color:"error",variant:"text",onClick:k=>T(l.id)},{default:n(()=>[t(w,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:k=>_("form",l.id)},{default:n(()=>[t(w,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:k=>_("info",l.id)},{default:n(()=>[t(w,{size:"22",icon:"mdi-currency-usd"})]),_:2},1032,["onClick"])])])),[[V,!s(C)]])),128))]),x(e("tfoot",null,ie,512),[[V,!s(p).length]])]),_:1}),t(B),t(D,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[e("span",re,g(s(P)),1),t(H,{modelValue:s(o),"onUpdate:modelValue":a[3]||(a[3]=l=>y(o)?o.value=l:null),size:"small","total-visible":5,length:s(A)},null,8,["modelValue","length"])]),_:1})]))}});export{Ve as _};
