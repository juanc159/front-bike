import{_ as we}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-fa6ecce6.js";import{ao as O,I as w,k as $,O as Pe,q as m,bt as Ie,aN as ne,bL as Te,p as l,J as _e,aQ as G,G as ae,bo as ue,am as R,ak as H,$ as U,ac as L,bM as le,Y as W,a4 as se,bd as De,bf as Ce,ab as Be,a1 as Z,bh as Fe,F as J,A as $e,V as N,E as X,at as Ne,N as de,ae as fe,aq as Ae,aM as Me,aO as Oe,d as Ee,z as Le,y as Ke,ar as Ge,o as ie,c as Ue,b as Re,w as k,m as He,B as ze,H as z,bs as je}from"./index-333f41b8.js";import{u as We}from"./useCrudIncomeVehicleStore-5849385f.js";import{n as Q,r as B,v as ce}from"./validators-da167dd6.js";import{a as T,V as Y}from"./VRow-d2a2c669.js";import{V as j}from"./VSelect-026de29d.js";import{V as M}from"./VTextField-e0c3ad65.js";import{V as oe}from"./VCheckboxBtn-d06160c3.js";import{m as Qe,u as Ye}from"./VList-3f504e3e.js";import{V as Je}from"./VTable-3c216502.js";import{V as me}from"./VForm-fdf9fdaa.js";const Xe=(e,o,t)=>e==null||o==null?-1:e.toString().toLocaleLowerCase().indexOf(o.toString().toLocaleLowerCase()),Ze=O({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function qe(e,o,t){var n;const a=[],u=(t==null?void 0:t.default)??Xe,c=t!=null&&t.filterKeys?Ie(t.filterKeys):!1,s=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let d=0;d<e.length;d++){const f=e[d],r={},v={};let g=-1;if(o&&!(t!=null&&t.noFilter)){if(typeof f=="object"){const P=c||Object.keys(f);for(const I of P){const p=ne(f,I,f),h=(n=t==null?void 0:t.customKeyFilter)==null?void 0:n[I];if(g=h?h(p,o,f):u(p,o,f),g!==-1&&g!==!1)h?r[I]=g:v[I]=g;else if((t==null?void 0:t.filterMode)==="every")continue e}}else g=u(f,o,f),g!==-1&&g!==!1&&(v.title=g);const x=Object.keys(v).length,S=Object.keys(r).length;if(!x&&!S||(t==null?void 0:t.filterMode)==="union"&&S!==s&&!x||(t==null?void 0:t.filterMode)==="intersection"&&(S!==s||!x))continue}a.push({index:d,matches:{...v,...r}})}return a}function et(e,o,t,a){const u=w(()=>typeof(t==null?void 0:t.value)!="string"&&typeof(t==null?void 0:t.value)!="number"?"":String(t.value)),c=$([]),s=$(new Map);Pe(()=>{c.value=[],s.value=new Map;const d=m(o);qe(d,u.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:m(a==null?void 0:a.filterKeys)??e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).forEach(r=>{let{index:v,matches:g}=r;const x=d[v];c.value.push(x),s.value.set(x.value,g)})});function n(d){return s.value.get(d.value)}return{filteredItems:c,filteredMatches:s,getMatches:n}}const re=Te({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(e,o)=>{let{slots:t,attrs:a}=o;const u=e.tag??"td";return l(u,_e({class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding},`v-data-table-column--align-${e.align}`],style:{height:G(e.height),width:G(e.width),left:G(e.fixedOffset||null)}},a),{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t)]}})}),tt=O({headers:{type:Array,default:()=>[]}},"v-data-table-header"),ve=Symbol.for("vuetify:data-table-headers");function at(e,o){const t=$([]),a=$([]);ae(()=>e.headers,()=>{var S,P,I;const c=e.headers.length?Array.isArray(e.headers[0])?e.headers:[e.headers]:[],s=c.flatMap((p,h)=>p.map(b=>({column:b,row:h}))),n=c.length,d={title:"",sortable:!1},f={...d,width:48};if((S=o==null?void 0:o.groupBy)!=null&&S.value.length){const p=s.findIndex(h=>{let{column:b}=h;return b.key==="data-table-group"});p<0?s.unshift({column:{...d,key:"data-table-group",title:"Group",rowspan:n},row:0}):s.splice(p,1,{column:{...d,...s[p].column},row:s[p].row})}if((P=o==null?void 0:o.showSelect)!=null&&P.value){const p=s.findIndex(h=>{let{column:b}=h;return b.key==="data-table-select"});p<0?s.unshift({column:{...f,key:"data-table-select",rowspan:n},row:0}):s.splice(p,1,{column:{...f,...s[p].column},row:s[p].row})}if((I=o==null?void 0:o.showExpand)!=null&&I.value){const p=s.findIndex(h=>{let{column:b}=h;return b.key==="data-table-expand"});p<0?s.push({column:{...f,key:"data-table-expand",rowspan:n},row:0}):s.splice(p,1,{column:{...f,...s[p].column},row:s[p].row})}const r=ue(n).map(()=>[]),v=ue(n).fill(0);let g=0;s.forEach(p=>{let{column:h,row:b}=p;const _=h.key??`data-table-column-${g++}`;for(let C=b;C<=b+(h.rowspan??1)-1;C++)r[C].push({...h,key:_,fixedOffset:v[C],sortable:h.sortable??!!h.key}),v[C]+=h.width??0}),r.forEach(p=>{for(let h=p.length;h--;h>=0)if(p[h].fixed){p[h].lastFixed=!0;return}});const x=new Set;t.value=r.map(p=>{const h=[];for(const b of p)x.has(b.key)||(x.add(b.key),h.push(b));return h}),a.value=r.at(-1)??[]},{deep:!0,immediate:!0});const u={headers:t,columns:a};return R(ve,u),u}function q(){const e=H(ve);if(!e)throw new Error("Missing headers!");return e}const lt=O({showSelect:Boolean,modelValue:{type:Array,default:()=>[]}},"v-data-table-select"),ge=Symbol.for("vuetify:data-table-selection");function nt(e,o){const t=U(e,"modelValue",e.modelValue,v=>new Set(v),v=>[...v.values()]);function a(v){return v.every(g=>t.value.has(g.value))}function u(v){return v.some(g=>t.value.has(g.value))}function c(v,g){const x=new Set(t.value);for(const S of v)g?x.add(S.value):x.delete(S.value);t.value=x}function s(v){c([v],!a([v]))}function n(v){c(o.value,v)}const d=w(()=>t.value.size>0),f=w(()=>a(o.value)),r={toggleSelect:s,select:c,selectAll:n,isSelected:a,isSomeSelected:u,someSelected:d,allSelected:f};return R(ge,r),r}function ee(){const e=H(ge);if(!e)throw new Error("Missing selection!");return e}const ot=O({sortBy:{type:Array,default:()=>[]},multiSort:Boolean,mustSort:Boolean},"v-data-table-sort"),be=Symbol.for("vuetify:data-table-sort");function rt(e){const o=U(e,"sortBy"),t=L(e,"mustSort"),a=L(e,"multiSort");return{sortBy:o,mustSort:t,multiSort:a}}function ut(e){const{sortBy:o,mustSort:t,multiSort:a,page:u}=e,s={sortBy:o,toggleSort:n=>{let d=o.value.map(r=>({...r}))??[];const f=d.find(r=>r.key===n);f?f.order==="desc"?t.value?f.order="asc":d=d.filter(r=>r.key!==n):f.order="desc":a.value?d=[...d,{key:n,order:"asc"}]:d=[{key:n,order:"asc"}],o.value=d,u&&(u.value=1)}};return R(be,s),s}function st(){const e=H(be);if(!e)throw new Error("Missing sort!");return e}function dt(e,o,t){const a=w(()=>t.value.reduce((c,s)=>(s.sort&&(c[s.key]=s.sort),c),{}));return{sortedItems:w(()=>o.value.length?it(e.value,o.value,"en",a.value):e.value)}}function it(e,o,t,a){const u=new Intl.Collator(t,{sensitivity:"accent",usage:"sort"});return[...e].sort((c,s)=>{for(let n=0;n<o.length;n++){const d=o[n].key,f=o[n].order;if(f===!1)continue;let r=le(c.raw,d),v=le(s.raw,d);if(f==="desc"&&([r,v]=[v,r]),a!=null&&a[d]){const g=a[d](r,v);if(!g)continue;return g}if(!(r==null||v==null)){if(r instanceof Date&&v instanceof Date)return r.getTime()-v.getTime();if([r,v]=[r,v].map(g=>(g||"").toString().toLocaleLowerCase()),r!==v)return!isNaN(r)&&!isNaN(v)?Number(r)-Number(v):u.compare(r,v)}}return 0})}const ct=W()({name:"VDataTableHeaders",props:{color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:se,default:"$sortAsc"},sortDescIcon:{type:se,default:"$sortDesc"},...De()},setup(e,o){let{slots:t,emit:a}=o;const{toggleSort:u,sortBy:c}=st(),{someSelected:s,allSelected:n,selectAll:d}=ee(),{columns:f,headers:r}=q(),{loaderClasses:v}=Ce(e),g=(h,b)=>!e.sticky&&!h.fixed?null:{position:"sticky",zIndex:h.fixed?4:e.sticky?3:void 0,left:h.fixed?G(h.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${b})`:void 0};function x(h){const b=c.value.find(_=>_.key===h);return b?b.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:S,backgroundColorStyles:P}=Be(e,"color"),I=w(()=>({headers:r.value,columns:f.value,toggleSort:u,sortBy:c.value,someSelected:s.value,allSelected:n.value,selectAll:d,getSortIcon:x,getFixedStyles:g})),p=h=>{let{column:b,x:_,y:C}=h;const D=!!c.value.find(E=>E.key===b.key),K=b.key==="data-table-select"||b.key==="data-table-expand";return l(re,{tag:"th",align:b.align,class:["v-data-table__th",{"v-data-table__th--sortable":b.sortable,"v-data-table__th--sorted":D},v.value],style:{width:G(b.width),minWidth:G(b.width),...g(b,C)},colspan:b.colspan,rowspan:b.rowspan,onClick:b.sortable?()=>u(b.key):void 0,lastFixed:b.lastFixed,noPadding:K},{default:()=>{var V;const E=`column.${b.key}`,A={column:b,selectAll:d};return t[E]?t[E](A):b.key==="data-table-select"?((V=t["column.data-table-select"])==null?void 0:V.call(t,A))??l(oe,{modelValue:n.value,indeterminate:s.value&&!n.value,"onUpdate:modelValue":d},null):l("div",{class:"v-data-table-header__content"},[l("span",null,[b.title]),b.sortable&&l($e,{key:"icon",class:"v-data-table-header__sort-icon",icon:x(b.key)},null),e.multiSort&&D&&l("div",{key:"badge",class:["v-data-table-header__sort-badge",...S.value],style:P.value},[c.value.findIndex(i=>i.key===b.key)+1])])}})};Z(()=>l(J,null,[t.headers?t.headers(I.value):r.value.map((h,b)=>l("tr",null,[h.map((_,C)=>l(p,{column:_,x:C,y:b},null))])),e.loading&&l("tr",{class:"v-data-table__progress"},[l("th",{colspan:f.value.length},[l(Fe,{name:"v-data-table-headers",active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:t.loader})])])]))}}),mt=O({groupBy:{type:Array,default:()=>[]}},"data-table-group"),ye=Symbol.for("vuetify:data-table-group");function ft(e){return{groupBy:U(e,"groupBy")}}function vt(e){const{groupBy:o,sortBy:t}=e,a=$(new Set),u=w(()=>o.value.map(f=>({...f,order:f.order??!1})).concat(t.value));function c(f){return a.value.has(f.id)}function s(f){const r=new Set(a.value);c(f)?r.delete(f.id):r.add(f.id),a.value=r}function n(f){function r(v){const g=[];for(const x of v.items)x.type==="item"?g.push(x):g.push(...r(x));return g}return r({type:"group-header",items:f,id:"dummy",key:"dummy",value:"dummy",depth:0})}const d={sortByWithGroups:u,toggleGroup:s,opened:a,groupBy:o,extractRows:n,isGroupOpen:c};return R(ye,d),d}function pe(){const e=H(ye);if(!e)throw new Error("Missing group!");return e}function gt(e,o){if(!e.length)return[];const t=new Map;for(const a of e){const u=le(a.raw,o);t.has(u)||t.set(u,[]),t.get(u).push(a)}return t}function he(e,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!o.length)return[];const u=gt(e,o[0]),c=[],s=o.slice(1);return u.forEach((n,d)=>{const f=o[0],r=`${a}_${f}_${d}`;c.push({depth:t,id:r,key:f,value:d,items:s.length?he(n,s,t+1,r):n,type:"group-header"})}),c}function xe(e,o){const t=[];for(const a of e)a.type==="group-header"?(a.value!=null&&t.push(a),(o.has(a.id)||a.value==null)&&t.push(...xe(a.items,o))):t.push(a);return t}function bt(e,o,t){return{flatItems:w(()=>{if(!o.value.length)return e.value;const u=he(e.value,o.value.map(c=>c.key));return xe(u,t.value)})}}const yt=W()({name:"VDataTableGroupHeaderRow",props:{item:{type:Object,required:!0}},setup(e,o){let{slots:t}=o;const{isGroupOpen:a,toggleGroup:u,extractRows:c}=pe(),{isSelected:s,isSomeSelected:n,select:d}=ee(),{columns:f}=q(),r=w(()=>c([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[f.value.map(v=>{var g,x;if(v.key==="data-table-group"){const S=a(e.item)?"$expand":"$next",P=()=>u(e.item);return((g=t["data-table-group"])==null?void 0:g.call(t,{item:e.item,count:r.value.length,props:{icon:S,onClick:P}}))??l(re,{class:"v-data-table-group-header-row__column"},{default:()=>[l(N,{size:"small",variant:"text",icon:S,onClick:P},null),l("span",null,[e.item.value]),l("span",null,[X("("),r.value.length,X(")")])]})}if(v.key==="data-table-select"){const S=s(r.value),P=n(r.value)&&!S,I=p=>d(r.value,p);return((x=t["data-table-select"])==null?void 0:x.call(t,{props:{modelValue:S,indeterminate:P,"onUpdate:modelValue":I}}))??l("td",null,[l(oe,{modelValue:S,indeterminate:P,"onUpdate:modelValue":I},null)])}return l("td",null,null)})])}}),pt=O({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"v-data-table-expand"),Se=Symbol.for("vuetify:datatable:expanded");function ht(e){const o=L(e,"expandOnClick"),t=U(e,"expanded",e.expanded,n=>new Set(n),n=>[...n.values()]);function a(n,d){const f=new Set(t.value);d?f.add(n.value):f.delete(n.value),t.value=f}function u(n){return t.value.has(n.value)}function c(n){a(n,!u(n))}const s={expand:a,expanded:t,expandOnClick:o,isExpanded:u,toggleExpand:c};return R(Se,s),s}function Ve(){const e=H(Se);if(!e)throw new Error("foo");return e}const xt=Ne({name:"VDataTableRow",props:{index:Number,item:Object,onClick:Function},setup(e,o){let{slots:t}=o;const{isSelected:a,toggleSelect:u}=ee(),{isExpanded:c,toggleExpand:s}=Ve(),{columns:n}=q();Z(()=>l("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!e.onClick}],onClick:e.onClick},[e.item&&n.value.map((d,f)=>l(re,{align:d.align,fixed:d.fixed,fixedOffset:d.fixedOffset,lastFixed:d.lastFixed,noPadding:d.key==="data-table-select"||d.key==="data-table-expand",width:d.width},{default:()=>{var x,S;const r=e.item,v=`item.${d.key}`,g={index:e.index,item:e.item,columns:n.value,isSelected:a,toggleSelect:u,isExpanded:c,toggleExpand:s};return t[v]?t[v](g):d.key==="data-table-select"?((x=t["item.data-table-select"])==null?void 0:x.call(t,g))??l(oe,{modelValue:a([r]),onClick:de(()=>u(r),["stop"])},null):d.key==="data-table-expand"?((S=t["item.data-table-expand"])==null?void 0:S.call(t,g))??l(N,{icon:c(r)?"$collapse":"$expand",size:"small",variant:"text",onClick:de(()=>s(r),["stop"])},null):ne(r.columns,d.key)}}))]))}}),St=W()({name:"VDataTableRows",props:{loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},setup(e,o){let{emit:t,slots:a}=o;const{columns:u}=q(),{expandOnClick:c,toggleExpand:s,isExpanded:n}=Ve(),{isSelected:d,toggleSelect:f}=ee(),{toggleGroup:r,isGroupOpen:v}=pe(),{t:g}=fe();return Z(()=>{var x;return e.loading&&a.loading?l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:u.value.length},[a.loading()])]):!e.loading&&!e.items.length&&!e.hideNoData?l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:u.value.length},[((x=a["no-data"])==null?void 0:x.call(a))??g(e.noDataText)])]):l(J,null,[e.items.map((S,P)=>{var p;if(S.type==="group-header")return a["group-header"]?a["group-header"]({index:P,item:S,columns:u.value,isExpanded:n,toggleExpand:s,isSelected:d,toggleSelect:f,toggleGroup:r,isGroupOpen:v}):l(yt,{key:`group-header_${S.id}`,item:S},a);const I={index:P,item:S,columns:u.value,isExpanded:n,toggleExpand:s,isSelected:d,toggleSelect:f};return l(J,null,[a.item?a.item(I):l(xt,{key:`item_${S.value}`,onClick:c.value||e["onClick:row"]?h=>{var b;c.value&&s(S),(b=e["onClick:row"])==null||b.call(e,h,{item:S})}:void 0,index:P,item:S},a),n(S)&&((p=a["expanded-row"])==null?void 0:p.call(a,I))])})])}),{}}});const Vt=O({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"v-data-table-paginate"),ke=Symbol.for("vuetify:data-table-pagination");function kt(e){const o=U(e,"page",void 0,a=>+(a??1)),t=U(e,"itemsPerPage",void 0,a=>+(a??10));return{page:o,itemsPerPage:t}}function wt(e){const{page:o,itemsPerPage:t,itemsLength:a}=e,u=w(()=>t.value===-1?0:t.value*(o.value-1)),c=w(()=>t.value===-1?a.value:Math.min(a.value,u.value+t.value)),s=w(()=>t.value===-1||a.value===0?1:Math.ceil(a.value/t.value));function n(f){t.value=f,o.value=1}const d={page:o,itemsPerPage:t,itemsLength:a,startIndex:u,stopIndex:c,pageCount:s,setItemsPerPage:n};return R(ke,d),d}function Pt(){const e=H(ke);if(!e)throw new Error("Missing pagination!");return e}function It(e){const{items:o,startIndex:t,stopIndex:a,itemsPerPage:u}=e;return{paginatedItems:w(()=>u.value<=0?o.value:o.value.slice(t.value,a.value))}}const Tt=W()({name:"VDataTableFooter",props:{prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},setup(e,o){let{slots:t}=o;const{t:a}=fe(),{page:u,pageCount:c,startIndex:s,stopIndex:n,itemsLength:d,itemsPerPage:f,setItemsPerPage:r}=Pt(),v=w(()=>e.itemsPerPageOptions.map(g=>({...g,title:a(g.title)})));return()=>{var g;return l("div",{class:"v-data-table-footer"},[(g=t.prepend)==null?void 0:g.call(t),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",null,[a(e.itemsPerPageText)]),l(j,{items:v.value,modelValue:f.value,"onUpdate:modelValue":x=>r(Number(x)),density:"compact",variant:"outlined","hide-details":!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[a(e.pageText,d.value?s.value+1:0,n.value,d.value)])]),l("div",{class:"v-data-table-footer__pagination"},[l(N,{icon:e.firstIcon,variant:"plain",onClick:()=>u.value=1,disabled:u.value===1,"aria-label":a(e.firstPageLabel)},null),l(N,{icon:e.prevIcon,variant:"plain",onClick:()=>u.value=Math.max(1,u.value-1),disabled:u.value===1,"aria-label":a(e.prevPageLabel)},null),e.showCurrentPage&&l("span",{key:"page",class:"v-data-table-footer__page"},[u.value]),l(N,{icon:e.nextIcon,variant:"plain",onClick:()=>u.value=Math.min(c.value,u.value+1),disabled:u.value===c.value,"aria-label":a(e.nextPageLabel)},null),l(N,{icon:e.lastIcon,variant:"plain",onClick:()=>u.value=c.value,disabled:u.value===c.value,"aria-label":a(e.lastPageLabel)},null)])])}}}),_t=O({...Qe({itemValue:"id"})},"v-data-table-item");function Dt(e,o,t){const a=o.split(".");for(;a.length>1;){const u=a.shift();e[u]==null&&(e[u]={}),typeof e[u]=="object"&&(e=e[u])}e[a[0]]=t}function Ct(e,o){const{items:t}=Ye(e);return{items:w(()=>t.value.map(u=>({...u,type:"item",columns:o.value.reduce((c,s)=>(Dt(c,s.key,ne(u.raw,s.value??s.key)),c),{})})))}}function Bt(e){let{page:o,itemsPerPage:t,sortBy:a,groupBy:u,search:c}=e;const s=Ae("VDataTable"),n=w(()=>({page:o.value,itemsPerPage:t.value,sortBy:a.value,groupBy:u.value,search:c.value}));ae(()=>c==null?void 0:c.value,()=>{o.value=1});let d=null;ae(n,()=>{Me(d,n.value)||(s.emit("update:options",n.value),d=n.value)},{deep:!0,immediate:!0})}const Ft=O({..._t(),...tt(),hideNoData:Boolean,hover:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},height:[String,Number],width:[String,Number],fixedHeader:Boolean,fixedFooter:Boolean,"onClick:row":Function,search:String},"v-data-table"),$t=W()({name:"VDataTable",props:{...Ft(),...pt(),...mt(),...lt(),...ot(),...Vt(),...Ze()},emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,o){let{emit:t,slots:a}=o;const{groupBy:u}=ft(e),{sortBy:c,multiSort:s,mustSort:n}=rt(e),{page:d,itemsPerPage:f}=kt(e),{columns:r}=at(e,{groupBy:u,showSelect:L(e,"showSelect"),showExpand:L(e,"showExpand")}),{items:v}=Ct(e,r),g=w(()=>r.value.map(A=>"columns."+A.key)),x=L(e,"search"),{filteredItems:S}=et(e,v,x,{filterKeys:g});ut({sortBy:c,multiSort:s,mustSort:n,page:d});const{sortByWithGroups:P,opened:I,extractRows:p}=vt({groupBy:u,sortBy:c}),{sortedItems:h}=dt(S,P,r),{flatItems:b}=bt(h,u,I),_=w(()=>b.value.length),{startIndex:C,stopIndex:D}=wt({page:d,itemsPerPage:f,itemsLength:_}),{paginatedItems:K}=It({items:b,startIndex:C,stopIndex:D,itemsPerPage:f}),E=w(()=>p(K.value));return nt(e,E),ht(e),Bt({page:d,itemsPerPage:f,sortBy:c,groupBy:u,search:x}),Oe({VDataTableRows:{hideNoData:L(e,"hideNoData"),noDataText:L(e,"noDataText")}}),Z(()=>l(Je,{class:["v-data-table",{"v-data-table--show-select":e.showSelect}],fixedHeader:e.fixedHeader,fixedFooter:e.fixedFooter,height:e.height,hover:e.hover},{top:a.top,default:a.default??(()=>{var A,V,i,F;return l(J,null,[(A=a.colgroup)==null?void 0:A.call(a,{columns:r}),l("thead",null,[l(ct,{sticky:e.fixedHeader,multiSort:e.multiSort},a)]),(V=a.thead)==null?void 0:V.call(a),l("tbody",null,[a.body?a.body():l(St,{items:K.value,"onClick:row":e["onClick:row"]},a)]),(i=a.tbody)==null?void 0:i.call(a),(F=a.tfoot)==null?void 0:F.call(a)])}),bottom:a.bottom??(()=>l(Tt,null,{prepend:a["footer.prepend"]}))})),{}}}),Nt={class:"col-md-6 d-flex justify-content-end"},Wt=Ee({__name:"Form",props:{userId:{type:Number,default:null,required:!1},btnBack:{type:Boolean,default:!0,required:!1}},setup(e){const o=e,t=je(),a=[{title:"Nombre",key:"name"},{title:"Valor",key:"amount"},{title:"Acción",key:"action"}],u=$(),c=Le(),s=We(),{formulario:n,operatives:d,typeArrangement:f}=Ke(s),r=$([]),v=$([]),g=async V=>{var i;s.typeAction=V,v.value=[],r.value=[],await((i=u.value)==null?void 0:i.resetValidation()),V!="back"&&s.keyList++},x=w(()=>{const V=String(p.value).replaceAll(".",""),i=String(n.value.value_parts).replaceAll(".","");return Q(Number(V??0)+Number(i??0))}),S=w(()=>{const V=String(p.value).replaceAll(".","");return Q(Number(V??0)*60/100)}),P=w(()=>{const V=String(p.value).replaceAll(".","");return Q(Number(V??0)*40/100)}),I=w(()=>P.value),p=w(()=>{let V=0;return _.value.forEach(i=>{const F=String(i.amount).replaceAll(".","");V+=Number(F??0)}),Q(V)}),h=async()=>{var i;n.value.company_id=c.company.id,n.value.total_costs=Number(String(x.value).replaceAll(".","")),n.value.paid_labor=Number(String(S.value).replaceAll(".","")),n.value.value_labor=Number(String(p.value).replaceAll(".","")),n.value.value_labor40=Number(String(P.value).replaceAll(".","")),n.value.utilites=Number(String(I.value).replaceAll(".","")),n.value.value_parts=Number(String(n.value.value_parts).replaceAll(".",""));const V=await((i=u.value)==null?void 0:i.validate());if(V!=null&&V.valid){const F=await s.fetchSave();F.status===200&&g("list"),F.status===422&&(r.value=F.error)}},b=$(),_=$([]),C=w(()=>_.value.filter(V=>V.delete!="delete")),D=$({type:null,amount:null}),K=()=>{D.value={type:null,amount:null}},E=async()=>{var i;const V=await((i=b.value)==null?void 0:i.validate());if(V!=null&&V.valid)if(_.value.find(y=>y.type_id==D.value.type))t.toast("Este Tipo De Arreglo Ya Esta Seleccionado","","danger");else{const y=f.value.find(te=>te.id==D.value.type);_.value.push({type_id:D.value.type,name:y.name,amount:D.value.amount})}K()},A=async V=>{_.value[V].id?(console.log("if"),_.value[V].delete="delete"):(console.log("else"),_.value.splice(V,1))};return Ge(async()=>{await s.fetchDataForm(),o.userId&&await s.fetchInfo(o.userId)}),(V,i)=>{const F=we;return ie(),Ue("div",null,[o.btnBack==!0?(ie(),Re(Y,{key:0},{default:k(()=>[l(T,{cols:"12"},{default:k(()=>[He("div",Nt,[l(N,{color:"secondary",onClick:i[0]||(i[0]=y=>g("back"))},{default:k(()=>[X(" Atras ")]),_:1})])]),_:1})]),_:1})):ze("",!0),l(m(me),{ref_key:"formValidation",ref:u,"lazy-validation":""},{default:k(()=>[l(Y,null,{default:k(()=>[l(T,{cols:"12",md:"4",class:"mt-1"},{default:k(()=>[l(F,{modelValue:m(n).date_init,"onUpdate:modelValue":i[1]||(i[1]=y=>m(n).date_init=y),label:"Fecha Ingreso"},null,8,["modelValue"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-2"},{default:k(()=>[l(j,{items:m(d),modelValue:m(n).mecanic_id,"onUpdate:modelValue":i[2]||(i[2]=y=>m(n).mecanic_id=y),label:"Operario","item-value":"id","item-title":"name",rules:[m(B)],class:"mt-5"},null,8,["items","modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-2"},{default:k(()=>[l(j,{items:["Moto","Carro"],modelValue:m(n).type_vehicle,"onUpdate:modelValue":i[3]||(i[3]=y=>m(n).type_vehicle=y),label:"Tipo de Vehículo",rules:[m(B)],class:"mt-5"},null,8,["modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(n).brand,"onUpdate:modelValue":i[4]||(i[4]=y=>m(n).brand=y),rules:[m(B)],autocomplete:"off","error-messages":m(r).brand,label:"Marca",onKeypress:i[5]||(i[5]=y=>m(r).brand=""),class:"mt-3"},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-2"},{default:k(()=>[l(j,{items:["Si","No"],modelValue:m(n).pay_labor,"onUpdate:modelValue":i[6]||(i[6]=y=>m(n).pay_labor=y),label:"Pago Mano De Obra",rules:[m(B)],class:"mt-5"},null,8,["modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(n).plate,"onUpdate:modelValue":i[7]||(i[7]=y=>m(n).plate=y),rules:[m(B)],autocomplete:"off","error-messages":m(r).plate,label:"Placa",onKeypress:i[8]||(i[8]=y=>m(r).plate="")},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(n).value_parts,"onUpdate:modelValue":i[9]||(i[9]=y=>m(n).value_parts=y),rules:[m(B)],autocomplete:"off","error-messages":m(r).value_parts,onBlur:i[10]||(i[10]=y=>m(n).value_parts=m(ce)(m(n).value_parts)),label:"Valor Repuestos",onKeypress:i[11]||(i[11]=y=>m(r).value_parts="")},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-1"},{default:k(()=>[l(F,{modelValue:m(n).date_pay_labor,"onUpdate:modelValue":i[12]||(i[12]=y=>m(n).date_pay_labor=y),label:"Fecha Pago Mano De Obra"},null,8,["modelValue"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(S),"onUpdate:modelValue":i[13]||(i[13]=y=>z(S)?S.value=y:null),rules:[m(B)],autocomplete:"off","error-messages":m(r).paid_labor60,disabled:"",label:"Valor Mano De Obra 60%",onKeypress:i[14]||(i[14]=y=>m(r).paid_labor=""),class:"mt-3"},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(P),"onUpdate:modelValue":i[15]||(i[15]=y=>z(P)?P.value=y:null),rules:[m(B)],autocomplete:"off",label:"Valor Mano De Obra 40%",disabled:"",class:"mt-3"},null,8,["modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-3"},{default:k(()=>[l(M,{modelValue:m(x),"onUpdate:modelValue":i[16]||(i[16]=y=>z(x)?x.value=y:null),rules:[m(B)],autocomplete:"off","error-messages":m(r).total_costs,label:"Total Costos",onKeypress:i[17]||(i[17]=y=>m(r).total_costs=""),class:"mt-2",disabled:""},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(I),"onUpdate:modelValue":i[18]||(i[18]=y=>z(I)?I.value=y:null),rules:[m(B)],autocomplete:"off","error-messages":m(r).utilites,label:"Utilidades",onKeypress:i[19]||(i[19]=y=>m(r).utilites=""),class:"mt-3",disabled:""},null,8,["modelValue","rules","error-messages"])]),_:1}),l(T,{cols:"12",md:"4",class:"mt-5"},{default:k(()=>[l(M,{modelValue:m(p),"onUpdate:modelValue":i[20]||(i[20]=y=>z(p)?p.value=y:null),rules:[m(B)],autocomplete:"off","error-messages":m(r).value_labor,disabled:"",label:"Valor Mano De Obra",onKeypress:i[21]||(i[21]=y=>m(r).value_labor="")},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1},512),l(m(me),{ref_key:"formValidate",ref:b,"lazy-validation":""},{default:k(()=>[l(Y,null,{default:k(()=>[l(T,{cols:"12",md:"5",class:""},{default:k(()=>[l(j,{items:m(f),label:"Tipo De Arreglo",modelValue:m(D).type,"onUpdate:modelValue":i[22]||(i[22]=y=>m(D).type=y),"item-value":"id","item-title":"name",rules:[m(B)],class:"mt-5"},null,8,["items","modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"5",class:"mt-3"},{default:k(()=>[l(M,{modelValue:m(D).amount,"onUpdate:modelValue":i[23]||(i[23]=y=>m(D).amount=y),class:"mt-2",label:"Valor",onBlur:i[24]||(i[24]=y=>m(D).amount=m(ce)(m(D).amount)),rules:[m(B)]},null,8,["modelValue","rules"])]),_:1}),l(T,{cols:"12",md:"2",class:"mt-0"},{default:k(()=>[l(N,{color:"primary",icon:"tabler-plus",class:"ml-2 mt-3",onClick:i[25]||(i[25]=y=>E())})]),_:1})]),_:1})]),_:1},512),l(T,{cols:"12",md:"12",class:"mt-2 d-flex mb-5"},{default:k(()=>[l(m($t),{headers:a,items:m(C),height:"300","fixed-header":""},{bottom:k(()=>[]),"item.action":k(({item:y,index:te})=>[l(N,{color:"error",icon:"tabler-trash",onClick:At=>A(te),size:"30"},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),l(Y,null,{default:k(()=>[l(T,{cols:"12 d-flex justify-content-center"},{default:k(()=>[l(N,{color:"primary",onClick:h},{default:k(()=>[X(" Guardar ")]),_:1})]),_:1})]),_:1})])}}});export{Wt as _};
