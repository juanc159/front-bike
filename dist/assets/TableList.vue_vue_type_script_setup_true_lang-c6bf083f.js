import{d as R,z as j,y as M,k as b,ar as Q,G as B,bj as q,I as G,o as _,c as y,p as a,w as r,m as e,q as o,H as x,V as h,A as V,E as T,K as w,L as g,F as H,a as K,x as u}from"./index-ecce922e.js";import{S as J}from"./sweetalert2.all-09c1f25c.js";import{n as p}from"./validators-da167dd6.js";import{_ as O,V as W}from"./VPagination-b0fd92c0.js";import{u as X}from"./useCrudSaleStore-08583aac.js";import{V as Y}from"./VSelect-d4be5138.js";import{V as Z}from"./VSpacer-07cad1f4.js";import{V as ee}from"./VTextField-a151c4b5.js";import{V as z}from"./VContainer-c4cd337c.js";import{V as $}from"./VDivider-32b31792.js";import{V as te}from"./VTable-1a3fdd4b.js";const ae={class:"me-3",style:{width:"80px"}},le={class:"me-3",style:{width:"80px"}},oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},se={style:{width:"10rem"}},ne=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Referencia "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Valor Venta "),e("th",{scope:"col"}," Total "),e("th",{scope:"col"}," Utilidades "),e("th",{scope:"col"}," Acciones ")])],-1),ie={colspan:"6"},re={class:"text-center",style:{width:"5rem"}},ce=e("tr",null,[e("td",{colspan:"6",class:"text-center"}," No se encuentran resultados ")],-1),ue=[ce],de={class:"text-sm text-disabled"},Se=R({__name:"TableList",setup(pe){const C=j(),n=X(),{sales:m,totalPage:f,lastPage:A,currentPage:s,totalData:P,loading:S,pathExcel:E,formulario:k}=M(n),c=b(10),d=b(""),v=async()=>{await n.fetchAll({company_id:C.company.id,perPage:c.value,page:s.value,searchQuery:d.value})};Q(async()=>{await v()}),B(s,async()=>{s.value>f.value&&(s.value=f.value)}),B(c,async()=>{s.value=1}),q([s,d,c],async()=>{await v()});const N=G(()=>{const i=m.value.length?(s.value-1)*f.value+1:0,t=m.value.length+(s.value-1)*f.value;return`Mostrando ${i} a ${t} de ${P.value} registros`}),D=async(i,t=null)=>{n.clearFormulario(),n.typeAction=i,t&&(await n.fetchInfo(t),k.value.price_vehicle=p(k.value.price_vehicle))},F=async()=>{await n.excel({company_id:C.company.id}).then(i=>{window.open(E.value,"_blank")})},I=async i=>{J.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await n.fetchDelete(i),await v()):t.isDenied})};return(i,t)=>(_(),y("div",null,[a(z,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",ae,[a(Y,{modelValue:o(c),"onUpdate:modelValue":t[0]||(t[0]=l=>x(c)?c.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",le,[a(h,{"mt-2":"",size:"x-small",color:"default",variant:"text",title:"Descargar",onClick:t[1]||(t[1]=l=>F())},{default:r(()=>[a(V,{size:"30",icon:"mdi-file-excel"}),T(" Excel ")]),_:1})]),a(Z),e("div",oe,[e("div",se,[a(ee,{modelValue:o(d),"onUpdate:modelValue":t[2]||(t[2]=l=>x(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(h,{color:"primary",onClick:t[3]||(t[3]=l=>D("form"))},{default:r(()=>[T(" Agregar ")]),_:1})])]),_:1}),a($),a(te,{class:"text-no-wrap"},{default:r(()=>[ne,e("tbody",null,[w(e("tr",null,[e("td",ie,[a(O)])],512),[[g,o(S)]]),(_(!0),y(H,null,K(o(m),(l,U)=>w((_(),y("tr",{key:U,style:{height:"3.75rem"}},[e("td",null,[e("span",null,u(l.inventory_reference),1)]),e("td",null,[e("span",null,u(o(p)(l.inventory_purchaseValue)),1)]),e("td",null,[e("span",null,u(o(p)(l.price_vehicle)),1)]),e("td",null,[e("span",null,u(o(p)(l.total)),1)]),e("td",null,[e("span",null,u(o(p)(l.utilities)),1)]),e("td",re,[a(h,{size:"x-small",color:"error",variant:"text",onClick:L=>I(l.id)},{default:r(()=>[a(V,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:L=>D("form",l.id)},{default:r(()=>[a(V,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[g,!o(S)]])),128))]),w(e("tfoot",null,ue,512),[[g,!o(m).length]])]),_:1}),a($),a(z,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",de,u(o(N)),1),a(W,{modelValue:o(s),"onUpdate:modelValue":t[4]||(t[4]=l=>x(s)?s.value=l:null),size:"small","total-visible":5,length:o(A)},null,8,["modelValue","length"])]),_:1})]))}});export{Se as _};
