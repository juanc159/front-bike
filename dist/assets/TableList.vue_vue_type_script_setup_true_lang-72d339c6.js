import{d as U,z as I,y as L,k,aq as M,L as D,ar as Q,N as q,o as v,c as y,p as a,w as r,m as e,q as n,M as x,C as f,V as _,E as b,Q as V,R as g,F as j,a as G,x as u}from"./index-62eefdbf.js";import{S as H}from"./sweetalert2.all-09c1f25c.js";import{V as B,_ as J,a as K}from"./VPagination-d6aadf77.js";import{u as O}from"./useCrudSaleStore-0acb0318.js";import{V as W}from"./VSelect-099d6728.js";import{V as X}from"./VSpacer-405bbbb1.js";import{V as Y}from"./VTextField-afc15bd9.js";import{V as T}from"./VDivider-b9b8fa2a.js";import{V as Z}from"./VTable-35230ba2.js";const ee={class:"me-3",style:{width:"80px"}},te={class:"me-3",style:{width:"80px"}},ae={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},le={style:{width:"10rem"}},se=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Referencia "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Valor Venta "),e("th",{scope:"col"}," Total "),e("th",{scope:"col"}," Utilidades "),e("th",{scope:"col"}," Acciones ")])],-1),ne={colspan:"4"},oe={class:"text-center",style:{width:"5rem"}},ie=e("tr",null,[e("td",{colspan:"4",class:"text-center"}," No se encuentran resultados ")],-1),re=[ie],ce={class:"text-sm text-disabled"},Ve=U({__name:"TableList",setup(ue){const w=I(),o=O(),{sales:p,totalPage:m,lastPage:z,currentPage:s,totalData:$,loading:C,pathExcel:P}=L(o),c=k(10),d=k(""),h=async()=>{await o.fetchAll({company_id:w.company.id,perPage:c.value,page:s.value,searchQuery:d.value})};M(async()=>{await h()}),D(s,async()=>{s.value>m.value&&(s.value=m.value)}),D(c,async()=>{s.value=1}),Q([s,d,c],async()=>{await h()});const A=q(()=>{const i=p.value.length?(s.value-1)*m.value+1:0,t=p.value.length+(s.value-1)*m.value;return`Mostrando ${i} a ${t} de ${$.value} registros`}),S=async(i,t=null)=>{o.clearFormulario(),o.typeAction=i,t&&o.fetchInfo(t)},N=async()=>{await o.excel({company_id:w.company.id}).then(i=>{window.open(P.value,"_blank")})},E=async i=>{H.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await o.fetchDelete(i),await h()):t.isDenied})};return(i,t)=>(v(),y("div",null,[a(B,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",ee,[a(W,{modelValue:n(c),"onUpdate:modelValue":t[0]||(t[0]=l=>x(c)?c.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",te,[a(f,{"mt-2":"",size:"x-small",color:"default",variant:"text",title:"Descargar",onClick:t[1]||(t[1]=l=>N())},{default:r(()=>[a(_,{size:"30",icon:"mdi-file-excel"}),b(" Excel ")]),_:1})]),a(X),e("div",ae,[e("div",le,[a(Y,{modelValue:n(d),"onUpdate:modelValue":t[2]||(t[2]=l=>x(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(f,{color:"primary",onClick:t[3]||(t[3]=l=>S("form"))},{default:r(()=>[b(" Agregar ")]),_:1})])]),_:1}),a(T),a(Z,{class:"text-no-wrap"},{default:r(()=>[se,e("tbody",null,[V(e("tr",null,[e("td",ne,[a(J)])],512),[[g,n(C)]]),(v(!0),y(j,null,G(n(p),(l,F)=>V((v(),y("tr",{key:F,style:{height:"3.75rem"}},[e("td",null,[e("span",null,u(l.inventory_reference),1)]),e("td",null,[e("span",null,u(l.inventory_purchaseValue),1)]),e("td",null,[e("span",null,u(l.inventory_saleValue),1)]),e("td",null,[e("span",null,u(l.total),1)]),e("td",null,[e("span",null,u(l.utilities),1)]),e("td",oe,[a(f,{size:"x-small",color:"error",variant:"text",onClick:R=>E(l.id)},{default:r(()=>[a(_,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:R=>S("form",l.id)},{default:r(()=>[a(_,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[g,!n(C)]])),128))]),V(e("tfoot",null,re,512),[[g,!n(p).length]])]),_:1}),a(T),a(B,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",ce,u(n(A)),1),a(K,{modelValue:n(s),"onUpdate:modelValue":t[4]||(t[4]=l=>x(s)?s.value=l:null),size:"small","total-visible":5,length:n(z)},null,8,["modelValue","length"])]),_:1})]))}});export{Ve as _};
