import{M as c,N as o,O as n,P as d}from"./index-5157f066.js";const s=d(),u=c("useCrudInventoryStore",{state:()=>({loading:!0,formulario:{id:null,reference:null,brand:null,model:null,color:null,plate:null,registrationSite:null,purchaseValue:null,vehicleType:null,state:"Ingresado",days:1},typeAction:"list",keyList:0,inventories:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,form:{batter:"No"}}),getters:{},actions:{clearFormulario(){this.formulario={id:null,reference:null,brand:null,model:null,color:null,plate:null,registrationSite:null,purchaseValue:null,vehicleType:null,state:"Ingresado",days:1}},async fetchAll(e){this.loading=!0,await o.post("/inventory-list",e).then(t=>{this.loading=!1,this.inventories=t.data.inventories,this.totalData=t.data.totalData,this.totalPage=t.data.totalPage,this.currentPage=t.data.currentPage,this.lastPage=t.data.lastPage}).catch(async t=>{this.loading=!1,console.log(await t)})},async fetchSave(){const e=n();return e.isLoading=!0,await await o.post("/inventory-create",this.formulario).then(a=>(e.isLoading=!1,a.data.code===200&&(this.formulario=a.data.data,this.clearFormulario(),this.form.batter="No",s.toast("Éxito",a.data.message,"success")),a.data.code===500&&s.toast("Error",a.data.message,"danger"),console.log(a.data.status),a.data.status===422?(s.toast("Error",a.data.message,"danger"),{error:a.data.errors,status:a.data.status}):{status:a.data.code})).catch(async a=>(e.isLoading=!1,a.response.status===500&&s.toast("Error",a.response.data.message,"danger"),console.log(await a),{status:a.response.state}))},async fetchDelete(e){const t=n();t.isLoading=!0,await o.delete(`/inventory-delete/${e}`).then(a=>{t.isLoading=!1,s.toast("Éxito",a.data.message,"success")}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async fetchInfo(e){const t=n();t.isLoading=!0,await o.get(`/inventory-info/${e}`).then(async a=>{console.log("RESULT",a),t.isLoading=!1,this.formulario=await a.data.data}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async changeSate(e,t){await o.post("/inventory-changeState",{id:e,state:t}).then(async a=>{if(a.data.code===200){const i=await a.data.data,l=this.inventories.find(r=>r.id===i.id);l.state=i.state,s.toast("Éxito",a.data.message,"success")}}).catch(async a=>{console.log(await a)})}}});export{u};
