import{d as O,z as W,k as x,y as X,ar as Y,G as A,bj as Z,I as ee,o as k,c as U,p as e,w as o,A as d,q as n,B as g,au as le,K as w,m as l,L as C,H as S,F as ae,a as te,x as p,V as N}from"./index-13e9e9f8.js";import{S as oe}from"./sweetalert2.all-09c1f25c.js";import{V as P,_ as ne,a as se}from"./VPagination-1ec261be.js";import{u as ie}from"./useCrudUserStore-3945aa65.js";import{d as z,V as F,c as ue}from"./VCard-15e81e81.js";import{V as b,a as c}from"./VRow-cb5cfbd1.js";import{V as I}from"./VSpacer-4c15bfe5.js";import{V as B}from"./VDivider-bc2a7ae6.js";import{V as L}from"./VSelect-457fc5fa.js";import{V as R}from"./VCheckbox-3cbf426b.js";import{V as D}from"./VTextField-2e327a5c.js";import{V as re}from"./VTable-a9c2f071.js";import{V as de}from"./VSwitch-5ea76cff.js";const ce={class:"mt-4"},me=l("span",null,"Estado",-1),fe={class:"mt-4"},pe={class:"me-3",style:{width:"80px"}},ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ve={style:{width:"10rem"}},_e=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," Nombre usuario "),l("th",{scope:"col"}," Número de identificación "),l("th",{scope:"col"}," Teléfono "),l("th",{scope:"col"}," Correo "),l("th",{scope:"col"}," Rol "),l("th",{scope:"col"}," Acciones "),l("th",{scope:"col"}," Estado ")])],-1),he={colspan:"6"},ye={class:"text-center",style:{width:"5rem"}},xe=l("tr",null,[l("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),ge=[xe],we={class:"text-sm text-disabled"},Ie=O({__name:"TableList",setup(Ce){const E=W(),r=ie(),m=x(!0),{users:_,totalPage:h,lastPage:j,currentPage:i,totalData:q,arrayRoles:M,loading:T}=X(r),f=x(10),v=x(""),s=x({}),V=async()=>{await r.fetchAll({company_id:E.company.id,perPage:f.value,page:i.value,searchQuery:v.value,role_id:s.value.role_id,state:s.value.state,name:s.value.name,identification:s.value.identification})};Y(async()=>{await V()}),A(i,async()=>{i.value>h.value&&(i.value=h.value)}),A(f,async()=>{i.value=1}),Z([i,v,f],async()=>{await V()});const Q=ee(()=>{const u=_.value.length?(i.value-1)*h.value+1:0,a=_.value.length+(i.value-1)*h.value;return`Mostrando ${u} a ${a} de ${q.value} registros`}),$=async(u,a=null)=>{r.clearFormulario(),r.typeAction=u,a&&r.fetchInfoUser(a)},G=async(u,a)=>{r.changeState(u,a)},H=()=>{s.value={},V()},K=async u=>{oe.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await r.fetchDelete(u),await V()):a.isDenied})};return(u,a)=>(k(),U("div",null,[e(F,{title:"Listado Usuario"},{default:o(()=>[e(z,null,{default:o(()=>[e(b,null,{default:o(()=>[e(c,{cols:"12"},{default:o(()=>[e(F,null,{default:o(()=>[e(ue,null,{default:o(()=>[e(d,{color:"orange-lighten-2",variant:"text",onClick:a[0]||(a[0]=t=>m.value=!n(m))},{default:o(()=>[g(" Criterios de búsqueda ")]),_:1}),e(I),e(d,{icon:n(m)?"mdi-chevron-up":"mdi-chevron-down",onClick:a[1]||(a[1]=t=>m.value=!n(m))},null,8,["icon"])]),_:1}),e(le,null,{default:o(()=>[w(l("div",null,[e(B),e(z,null,{default:o(()=>[e(b,null,{default:o(()=>[e(c,{cols:"12",md:"6"},{default:o(()=>[l("div",null,[e(L,{modelValue:n(s).role_id,"onUpdate:modelValue":a[2]||(a[2]=t=>n(s).role_id=t),items:n(M),"item-title":"name","item-value":"id",label:"Tipo de usuario"},null,8,["modelValue","items"])]),l("div",ce,[e(b,null,{default:o(()=>[e(c,{cols:"12",sm:"2",md:"2"},{default:o(()=>[me]),_:1}),e(c,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(R,{modelValue:n(s).state,"onUpdate:modelValue":a[3]||(a[3]=t=>n(s).state=t),label:"Activo",value:1},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(R,{modelValue:n(s).state,"onUpdate:modelValue":a[4]||(a[4]=t=>n(s).state=t),value:0,label:"Inactivo"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),e(c,{cols:"12",md:"6"},{default:o(()=>[l("div",null,[e(D,{modelValue:n(s).name,"onUpdate:modelValue":a[5]||(a[5]=t=>n(s).name=t),label:"Usuario"},null,8,["modelValue"])]),l("div",fe,[e(D,{modelValue:n(s).identification,"onUpdate:modelValue":a[6]||(a[6]=t=>n(s).identification=t),label:"Número de identificación"},null,8,["modelValue"])])]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(c,{cols:"12 d-flex justify-content-center"},{default:o(()=>[e(d,{color:"primary",class:"mr-2",onClick:V},{default:o(()=>[g(" Buscar ")]),_:1}),e(d,{color:"primary",onClick:H},{default:o(()=>[g(" Limpiar Filtros ")]),_:1})]),_:1})]),_:1})]),_:1})],512),[[C,n(m)]])]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[l("div",pe,[e(L,{modelValue:n(f),"onUpdate:modelValue":a[7]||(a[7]=t=>S(f)?f.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(I),l("div",ve,[l("div",Ve,[e(D,{modelValue:n(v),"onUpdate:modelValue":a[8]||(a[8]=t=>S(v)?v.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(d,{color:"primary",onClick:a[9]||(a[9]=t=>$("form"))},{default:o(()=>[g(" Agregar ")]),_:1})])]),_:1}),e(B),e(re,{class:"text-no-wrap"},{default:o(()=>[_e,l("tbody",null,[w(l("tr",null,[l("td",he,[e(ne)])],512),[[C,n(T)]]),(k(!0),U(ae,null,te(n(_),(t,J)=>w((k(),U("tr",{key:J,style:{height:"3.75rem"}},[l("td",null,[l("span",null,p(t.name),1)]),l("td",null,[l("span",null,p(t.identification),1)]),l("td",null,[l("span",null,p(t.phone),1)]),l("td",null,[l("span",null,p(t.email),1)]),l("td",null,[l("span",null,p(t.role),1)]),l("td",null,[e(de,{modelValue:t.state,"onUpdate:modelValue":y=>t.state=y,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:y=>G(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),l("td",ye,[e(d,{size:"x-small",color:"error",variant:"text",onClick:y=>K(t.id)},{default:o(()=>[e(N,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(d,{icon:"",size:"x-small",color:"default",variant:"text",onClick:y=>$("form",t.id)},{default:o(()=>[e(N,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[C,!n(T)]])),128))]),w(l("tfoot",null,ge,512),[[C,!n(_).length]])]),_:1}),e(B),e(P,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[l("span",we,p(n(Q)),1),e(se,{modelValue:n(i),"onUpdate:modelValue":a[10]||(a[10]=t=>S(i)?i.value=t:null),size:"small","total-visible":5,length:n(j)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]))}});export{Ie as _};
