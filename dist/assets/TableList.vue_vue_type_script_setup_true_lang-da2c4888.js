import{e as j,g as q,s as G,r as P,y as g,q as H,v as B,x as J,o as f,c as _,d as a,w as n,a as e,k as s,J as V,E as x,b as K,I as D,G as w,H as b,K as Z,L as O,t as r,l as N,Z as h,V as T,B as m,A as W,S as X}from"./index-5157f066.js";import{_ as Y,V as ee}from"./VPagination-4258e78a.js";import{u as te}from"./useCrudAdministrationStore-a8105c93.js";import{V as ae}from"./VSelect-6157aeab.js";import{V as se}from"./VSpacer-a82be323.js";import{V as le}from"./VTextField-f6b14139.js";import{V as A}from"./VDivider-43847767.js";import{V as oe}from"./VTable-bba866c0.js";const ne={class:"me-3",style:{width:"80px"}},ie={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},re={style:{width:"10rem"}},ce=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Nombre "),e("th",{scope:"col"}," Fecha Inicial "),e("th",{scope:"col"}," Fecha Final "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Costo "),e("th",{scope:"col"}," Acciones ")])],-1),ue={colspan:"6"},de={key:0},me={key:1},pe={class:"text-center",style:{width:"5rem"}},fe=e("tr",null,[e("td",{colspan:"6",class:"text-center"}," No se encuentran resultados ")],-1),_e=[fe],he={class:"text-sm text-disabled"},ve=e("h2",null,"Total Sin Pagar",-1),ge=e("h2",null,"Total Pagado",-1),ye=e("h2",null,"Valor Total",-1),De=j({__name:"TableList",setup(Ve){const $=q(),u=te(),{administrations:c,totalPage:v,lastPage:F,currentPage:i,totalData:z,loading:C,formulario:S}=G(u),d=P(10),p=P(""),I=g(()=>c.value.reduce((o,t)=>o+Number(t.cost),0)),E=g(()=>c.value.reduce((o,t)=>t.status!=1?o+Number(t.cost):o+0,0)),L=g(()=>c.value.reduce((o,t)=>t.status!=0?o+Number(t.cost):o+0,0)),y=async()=>{await u.fetchAll({company_id:$.company.id,perPage:d.value,page:i.value,searchQuery:p.value})};H(async()=>{await y()}),B(i,async()=>{i.value>v.value&&(i.value=v.value)}),B(d,async()=>{i.value=1}),J([i,p,d],async()=>{await y()});const R=g(()=>{const o=c.value.length?(i.value-1)*v.value+1:0,t=c.value.length+(i.value-1)*v.value;return`Mostrando ${o} a ${t} de ${z.value} registros`}),k=async(o,t=null)=>{u.clearFormulario(),u.typeAction=o,t&&(await u.fetchInfo(t),S.value.cost=h(S.value.cost))},U=async o=>{X.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await u.fetchDelete(o),await y()):t.isDenied})};return(o,t)=>(f(),_("div",null,[a(D,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[e("div",ne,[a(ae,{modelValue:s(d),"onUpdate:modelValue":t[0]||(t[0]=l=>V(d)?d.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(se),e("div",ie,[e("div",re,[a(le,{modelValue:s(p),"onUpdate:modelValue":t[1]||(t[1]=l=>V(p)?p.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(x,{color:"primary",onClick:t[2]||(t[2]=l=>k("form"))},{default:n(()=>[K(" Agregar ")]),_:1})])]),_:1}),a(A),a(oe,{class:"text-no-wrap"},{default:n(()=>[ce,e("tbody",null,[w(e("tr",null,[e("td",ue,[a(Y)])],512),[[b,s(C)]]),(f(!0),_(Z,null,O(s(c),(l,M)=>w((f(),_("tr",{key:M,style:{height:"3.75rem"}},[e("td",null,[e("span",null,r(l.name),1)]),e("td",null,[e("span",null,r(l.init_date),1)]),e("td",null,[e("span",null,r(l.final_date),1)]),e("td",null,[l.status==1?(f(),_("span",de," Pagado ")):N("",!0),l.status==0?(f(),_("span",me," Sin Pagar ")):N("",!0)]),e("td",null,[e("span",null,r(s(h)(l.cost)),1)]),e("td",pe,[a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:Q=>k("form",l.id)},{default:n(()=>[a(T,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(x,{size:"x-small",color:"error",variant:"text",onClick:Q=>U(l.id)},{default:n(()=>[a(T,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])])),[[b,!s(C)]])),128))]),w(e("tfoot",null,_e,512),[[b,!s(c).length]])]),_:1}),a(A),a(D,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[e("span",he,r(s(R)),1),a(ee,{modelValue:s(i),"onUpdate:modelValue":t[3]||(t[3]=l=>V(i)?i.value=l:null),size:"small","total-visible":5,length:s(F)},null,8,["modelValue","length"])]),_:1}),a(W,{class:"mt-5 mb-5"},{default:n(()=>[a(m,{sm:"6"},{default:n(()=>[ve]),_:1}),a(m,{sm:"6"},{default:n(()=>[e("h2",null,r(s(h)(s(E))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[ge]),_:1}),a(m,{sm:"6"},{default:n(()=>[e("h2",null,r(s(h)(s(L))),1)]),_:1}),a(m,{sm:"6"},{default:n(()=>[ye]),_:1}),a(m,{sm:"6"},{default:n(()=>[e("h2",null,r(s(h)(s(I))),1)]),_:1})]),_:1})]))}});export{De as _};
