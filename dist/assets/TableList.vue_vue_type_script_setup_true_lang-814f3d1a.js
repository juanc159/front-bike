import{d as Q,z as R,y as q,k as b,aq as j,L as z,ar as G,N as H,o as u,c as g,p as l,w as r,m as e,q as c,M as v,C as _,E as y,Q as x,R as w,F as J,a as K,b as S,x as s,I as C,V as T}from"./index-62eefdbf.js";import{S as O}from"./sweetalert2.all-09c1f25c.js";import{V as P,_ as W,a as X}from"./VPagination-d6aadf77.js";import{u as Y}from"./useCrudInventoryStore-34b4852a.js";import{V as $}from"./VSelect-099d6728.js";import{V as Z}from"./VSpacer-405bbbb1.js";import{V as ee}from"./VTextField-afc15bd9.js";import{V as I}from"./VDivider-b9b8fa2a.js";import{V as k}from"./VChip-e3037494.js";import{V as ae}from"./VTable-35230ba2.js";const te={class:"me-3",style:{width:"80px"}},le={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},oe={style:{width:"10rem"}},se=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Dias "),e("th",{scope:"col"}," Tipo de Vehículo "),e("th",{scope:"col"}," Marca "),e("th",{scope:"col"}," Modelo "),e("th",{scope:"col"}," Placa "),e("th",{scope:"col"}," Sitio de matricula "),e("th",{scope:"col"}," Valor Compra "),e("th",{scope:"col"}," Valor Venta "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),ne={colspan:"10"},re={class:"text-center d-flex justify-content-center aling-items-center"},ce=e("tr",null,[e("td",{colspan:"10",class:"text-center"}," No se encuentran resultados ")],-1),ie=[ce],de={class:"text-sm text-disabled"},we=Q({__name:"TableList",setup(ue){const N=R(),i=Y(),{inventories:f,totalPage:m,lastPage:A,currentPage:o,totalData:M,loading:D}=q(i),d=b(10),p=b(""),V=async()=>{await i.fetchAll({company_id:N.company.id,perPage:d.value,page:o.value,searchQuery:p.value})};j(async()=>{await V()}),z(o,async()=>{o.value>m.value&&(o.value=m.value)}),z(d,async()=>{o.value=1}),G([o,p,d],async()=>{await V()});const U=H(()=>{const n=f.value.length?(o.value-1)*m.value+1:0,t=f.value.length+(o.value-1)*m.value;return`Mostrando ${n} a ${t} de ${M.value} registros`}),B=async(n,t=null)=>{i.clearFormulario(),i.typeAction=n,t&&i.fetchInfo(t)},F=async n=>{O.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await i.fetchDelete(n),await V()):t.isDenied})},E=n=>{i.changeSate(n.id,n.state)};return(n,t)=>(u(),g("div",null,[l(P,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[e("div",te,[l($,{modelValue:c(d),"onUpdate:modelValue":t[0]||(t[0]=a=>v(d)?d.value=a:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(Z),e("div",le,[e("div",oe,[l(ee,{modelValue:c(p),"onUpdate:modelValue":t[1]||(t[1]=a=>v(p)?p.value=a:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(_,{color:"primary",onClick:t[2]||(t[2]=a=>B("form"))},{default:r(()=>[y(" Agregar ")]),_:1})])]),_:1}),l(I),l(ae,{class:"text-no-wrap"},{default:r(()=>[se,e("tbody",null,[x(e("tr",null,[e("td",ne,[l(W)])],512),[[w,c(D)]]),(u(!0),g(J,null,K(c(f),(a,L)=>x((u(),g("tr",{key:L,style:{height:"3.75rem"}},[e("td",null,[a.days<30?(u(),S(k,{key:0,size:"large",color:"success"},{default:r(()=>[y(s(a.days),1)]),_:2},1024)):C("",!0),a.days>=16&&a.days<=30?(u(),S(k,{key:1,size:"large",color:"warning"},{default:r(()=>[y(s(a.days),1)]),_:2},1024)):C("",!0),a.days>30?(u(),S(k,{key:2,size:"large",color:"error"},{default:r(()=>[y(s(a.days),1)]),_:2},1024)):C("",!0)]),e("td",null,[e("span",null,s(a.vehicleType),1)]),e("td",null,[e("span",null,s(a.brand),1)]),e("td",null,[e("span",null,s(a.model),1)]),e("td",null,[e("span",null,s(a.plate),1)]),e("td",null,[e("span",null,s(a.registrationSite),1)]),e("td",null,[e("span",null,s(a.purchaseValue),1)]),e("td",null,[e("span",null,s(a.saleValue),1)]),e("td",null,[l($,{modelValue:a.state,"onUpdate:modelValue":[h=>a.state=h,h=>E(a)],items:["Ingresado","Separado","Vendido"]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",re,[l(_,{class:"mr-2",icon:"",size:"x-small",color:"error",onClick:h=>F(a.id)},{default:r(()=>[l(T,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(_,{class:"mr-2",icon:"",size:"x-small",color:"default",onClick:h=>B("form",a.id)},{default:r(()=>[l(T,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[w,!c(D)]])),128))]),x(e("tfoot",null,ie,512),[[w,!c(f).length]])]),_:1}),l(I),l(P,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[e("span",de,s(c(U)),1),l(X,{modelValue:c(o),"onUpdate:modelValue":t[3]||(t[3]=a=>v(o)?o.value=a:null),size:"small","total-visible":5,length:c(A)},null,8,["modelValue","length"])]),_:1})]))}});export{we as _};
