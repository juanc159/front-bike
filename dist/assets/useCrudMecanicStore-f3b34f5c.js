import{M as n,N as s,O as i,P as c}from"./index-5157f066.js";const o=c(),d=n("useCrudMecanicStore",{state:()=>({loading:!0,formulario:{id:null,name:null,last_name:null,identify:null,status:null,company_id:null},typeAction:"list",keyList:0,mecanic:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,incomeVehiclesSi:[],incomeVehiclesNo:[]}),getters:{},actions:{clearFormulario(){this.formulario={id:null,name:null,last_name:null,identify:null,status:null,company_id:null}},async fetchAll(e){this.loading=!0,await s.post("/mecanic-list",e).then(t=>{this.loading=!1,this.mecanic=t.data.mecanics,this.totalData=t.data.totalData,this.totalPage=t.data.totalPage,this.currentPage=t.data.currentPage,this.lastPage=t.data.lastPage}).catch(async t=>{this.loading=!1})},async fetchSave(){const e=i();return e.isLoading=!0,await await s.post("/mecanic-create",this.formulario).then(a=>(e.isLoading=!1,a.data.code===200&&(this.formulario=a.data.data,this.clearFormulario(),o.toast("Éxito",a.data.message,"success")),a.data.code===500&&o.toast("Error",a.data.message,"danger"),console.log(a.data.code),a.data.code===422?(o.toast("Error",a.data.message,"danger"),{error:a.data.errors,code:a.data.code}):{code:a.data.code})).catch(async a=>(e.isLoading=!1,a.response.status===500&&o.toast("Error",a.response.data.message,"danger"),console.log(await a),{status:a.response.state}))},async fetchDelete(e){const t=i();t.isLoading=!0,await s.delete(`/mecanic-delete/${e}`).then(a=>{t.isLoading=!1,o.toast("Éxito",a.data.message,"success")}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async fetchInfo(e){const t=i();t.isLoading=!0,await s.post("/mecanic-info",e).then(async a=>{t.isLoading=!1,this.formulario=await a.data.data,this.incomeVehiclesSi=a.data.incomeVehiclesSi,this.incomeVehiclesNo=a.data.incomeVehiclesNo}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async fetchPay(e){await s.post("/mecanic-pay",e).then(t=>{console.log(t)}).catch(async t=>{console.log(await t)})}}});export{d as u};
